
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>My code works, I don&#8217;t know why.</title>
  <meta name="author" content="Wen Liao">
  <meta property="og:image" content="https://wen00072.github.io/files/pb.jpg" />


  
  <meta name="description" content="hello.c hello.c1
2
3
4
5
6
7
#incldue &lt;stdio.h&gt;
int main(int argc, char **argv)
{ printf(&quot;Hello World\n&quot;); return 0;
} ">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wen00072.github.io/posts/6/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My code works, I don't know why." type="application/atom+xml">
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My code works, I don&#8217;t know why.</a></h1>
  
    <h2>國王的耳朵是驢耳朵</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="wen00072.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/categories">Categories</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/25/hello-world/">Hello World</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-25T00:06:03+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>12:06 am</span></time>
        
           | <a href="/blog/2015/03/25/hello-world/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/03/25/hello-world/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>hello.c</h2>

<figure class='code'><figcaption><span>hello.c</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#incldue &lt;stdio.h&gt;</span>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello World</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/15/story-free-software-and-richard-stallman-slides-on-line/">故事：自由軟體和 Richard Stallman 投影片上線</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-15T23:44:00+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:44 pm</span></time>
        
           | <a href="/blog/2015/03/15/story-free-software-and-richard-stallman-slides-on-line/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/03/15/story-free-software-and-richard-stallman-slides-on-line/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><iframe src="//www.slideshare.net/slideshow/embed_code/45855449" width="720" height="560" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>


<p> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/zzz00072/richard-stallman-45855449" title="故事：自由軟體和 Richard Stallman" target="_blank">故事：自由軟體和 Richard Stallman</a> </strong> from <strong><a href="//www.slideshare.net/zzz00072" target="_blank">Wen Liao</a></strong> </div></p>

<script async class="speakerdeck-embed" data-id="c20dc69814f0439d8e8db97761ca012c" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/10/talk-git-directory/">談談.git 目錄</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-10T23:21:00+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:21 pm</span></time>
        
           | <a href="/blog/2015/03/10/talk-git-directory/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/03/10/talk-git-directory/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>如果有使用git的朋友，可能會知道git是一個分散式版本控制系統。這表示repository會放一份在本機上面。仔細或是有看書的人，會知道這些repository沒有意外會放在工作目錄的<code>.git</code>下面。今天無聊來這個目錄戳戳看。</p>

<p>因為愈寫愈多，還是弄一下目錄好了</p>

<ul>
<li><a href="#g_env">測試環境</a></li>
<li><a href="#g_bkg">背景知識</a></li>
<li><a href="#g_list">.git目錄列表</a></li>
<li><a href="#g_1st_file">.git第一層檔案</a>

<ul>
<li><a href="#gidx">index</a></li>
<li><a href="#gpkref">packed-refs</a></li>
<li><a href="#gconf">config</a></li>
<li><a href="#gorg_head">ORIG_HEAD</a></li>
<li><a href="#gdesc">description</a></li>
<li><a href="#ghead">HEAD</a></li>
</ul>
</li>
<li><a href="#g_1st_dir">.git第一層目錄</a>

<ul>
<li><a href="#g_1st_dir_br">branches</a></li>
<li><a href="#g_1st_dir_hk">hooks</a></li>
<li><a href="#g_1st_dir_inf">info</a></li>
<li><a href="#g_1st_dir_log">logs</a></li>
<li><a href="#g_1st_dir_obj">objects</a></li>
<li><a href="#g_1st_dir_ref">refs</a></li>
</ul>
</li>
<li><a href="#g_ref">參考資料</a></li>
</ul>


<p><a name="g_env"></a></p>

<h2>測試環境</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lsb_release -a
</span><span class='line'>No LSB modules are available.
</span><span class='line'>Distributor ID:   Ubuntu
</span><span class='line'>Description:  Ubuntu 14.04.2 LTS
</span><span class='line'>Release:  14.04
</span><span class='line'>Codename: trusty
</span><span class='line'>
</span><span class='line'>$ git --version
</span><span class='line'>git version 2.3.0
</span><span class='line'>
</span><span class='line'>$ git remote show 
</span><span class='line'>origin
</span><span class='line'>$ git remote show origin 
</span><span class='line'>* remote origin
</span><span class='line'>  Fetch URL: https://github.com/pcman-bbs/pcmanx.git
</span><span class='line'>  Push  URL: https://github.com/pcman-bbs/pcmanx.git
</span><span class='line'>  HEAD branch: master
</span><span class='line'>  Remote branches:
</span><span class='line'>    gtk3                          tracked
</span><span class='line'>    master                        tracked
</span><span class='line'>    next-release                  tracked
</span><span class='line'>    show_web_search_in_popup_menu tracked
</span><span class='line'>    transparent_background        tracked
</span><span class='line'>  Local branch configured for 'git pull':
</span><span class='line'>    master merges with remote master
</span><span class='line'>  Local ref configured for 'git push':
</span><span class='line'>    master pushes to master (up to date)</span></code></pre></td></tr></table></div></figure>


<p><a name="g_list"></a></p>

<h2>.git目錄列表</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/tmp/pcmanx$ ls -gG --group-directories-first .git
</span><span class='line'>total 56
</span><span class='line'>drwxrwxr-x 2  4096 Mar  3 23:36 branches
</span><span class='line'>drwxrwxr-x 2  4096 Mar  3 23:36 hooks
</span><span class='line'>drwxrwxr-x 2  4096 Mar  3 23:36 info
</span><span class='line'>drwxrwxr-x 3  4096 Mar  3 23:37 logs
</span><span class='line'>drwxrwxr-x 4  4096 Mar  3 23:36 objects
</span><span class='line'>drwxrwxr-x 5  4096 Mar  3 23:37 refs
</span><span class='line'>-rw-rw-r-- 1   264 Mar  3 23:37 config
</span><span class='line'>-rw-rw-r-- 1    73 Mar  3 23:36 description
</span><span class='line'>-rw-rw-r-- 1    23 Mar  3 23:37 HEAD
</span><span class='line'>-rw-rw-r-- 1 12256 Mar  4 23:11 index
</span><span class='line'>-rw-rw-r-- 1    41 Mar  4 23:11 ORIG_HEAD
</span><span class='line'>-rw-rw-r-- 1   829 Mar  3 23:37 packed-refs</span></code></pre></td></tr></table></div></figure>


<p><a name="g_bkg"></a></p>

<h2>背景知識</h2>

<p>這邊只列出需要的背景知識，可能有錯。</p>

<ul>
<li>Git 的基本上資料有分blob, tree, commit, tag這四種型態</li>
<li>Git 的branch可以視為放一個檔案，這個檔案存放某個commit的HASH資訊</li>
</ul>


<p>多說無益，直接操作，先來看這四種型態是三小</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git log
</span><span class='line'>commit fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>來看一下 fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304裏面是啥</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git cat-file -p fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304
</span><span class='line'>tree 2f6db7ea7db6b66cb4c07a98e78b580f67872db6
</span><span class='line'>parent 3fb419f40c10d67bd1b9b18152fb43cca58ca411
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>可以看到有放</p>

<ul>
<li>tree型態的HASH</li>
<li>上一個commit的HASH</li>
<li>commit的訊息</li>
</ul>


<p>接下來來看tree吧</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git cat-file -p 2f6db7ea7db6b66cb4c07a98e78b580f67872db6
</span><span class='line'>...
</span><span class='line'>100644 blob 5bc4b3f69d730535eb3a8aee28d7ef9273225d50  .gitignore
</span><span class='line'>...
</span><span class='line'>040000 tree b0b46378d75b1737257fef9d9eb433489b2d0ea0  build</span></code></pre></td></tr></table></div></figure>


<p>有沒有和Linux的<a href="http://en.wikipedia.org/wiki/Ext2#Directories">File system</a>很像？<del>目錄</del>tree資料放的是<del>inode</del>HASH值和檔案名稱的對應表。</p>

<p>我們可以看到HASH的型態有tree和blob，理所當然來看看blob吧。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git cat-file -p 5bc4b3f69d730535eb3a8aee28d7ef9273225d50
</span><span class='line'>## autotools generated
</span><span class='line'>Doxyfile
</span><span class='line'>INSTALL
</span><span class='line'>Makefile
</span><span class='line'>Makefile.in
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>很明顯這是一個資料存放的地方。</p>

<p>然後我們來看branch是不是真的放在檔案，檔案內容是某個commit HASH吧，直接看範例。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git checkout -b br1
</span><span class='line'>Switched to a new branch 'br1'
</span><span class='line'>$ git checkout -b br2
</span><span class='line'>Switched to a new branch 'br2'
</span><span class='line'>$ tree .git/refs/
</span><span class='line'>.git/refs/
</span><span class='line'>├── heads
</span><span class='line'>│   ├── br1
</span><span class='line'>│   ├── br2
</span><span class='line'>│   └── master
</span><span class='line'>├── remotes
</span><span class='line'>│   └── origin
</span><span class='line'>│       └── HEAD
</span><span class='line'>└── tags
</span><span class='line'>
</span><span class='line'>$ git log
</span><span class='line'>commit fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304
</span><span class='line'>...
</span><span class='line'>$ cat .git/refs/heads/br1 
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304
</span><span class='line'>$ cat .git/refs/heads/br2
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304
</span><span class='line'>$ cat .git/refs/heads/master 
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304</span></code></pre></td></tr></table></div></figure>


<p><a name="g_1st_file"></a></p>

<h2>.git第一層檔案</h2>

<p>用file看一下，可以看到大部分都是純文字檔：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/tmp/pcmanx$ find .git -maxdepth 1 -type f -exec file {} \;
</span><span class='line'>.git/index: Git index, version 2, 144 entries
</span><span class='line'>.git/packed-refs: ASCII text
</span><span class='line'>.git/config: ASCII text
</span><span class='line'>.git/ORIG_HEAD: ASCII text
</span><span class='line'>.git/description: ASCII text
</span><span class='line'>.git/HEAD: ASCII text</span></code></pre></td></tr></table></div></figure>


<p>接下來分別討論</p>

<ul>
<li><a href="#gidx">index</a></li>
<li><a href="#gpkref">packed-refs</a></li>
<li><a href="#gconf">config</a></li>
<li><a href="#gorg_head">ORIG_HEAD</a></li>
<li><a href="#gdesc">description</a></li>
<li><a href="#ghead">HEAD</a></li>
</ul>


<p><a name="gidx"></a></p>

<h2>index</h2>

<p>先看下面的操作。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ file .git/index 
</span><span class='line'>.git/index: Git index, version 2, 144 entries
</span><span class='line'>
</span><span class='line'>$ find -type f | grep -v .git\/ | cut -c 3- | sort | wc -l
</span><span class='line'>144
</span><span class='line'>
</span><span class='line'>$ git ls-files | wc -l
</span><span class='line'>144</span></code></pre></td></tr></table></div></figure>


<p>有興趣的人可以把<code>| wc -l</code>去掉玩看看，基本上這個是在描述repository的目錄結構。也就是說，哪個檔案要放在那個目錄。更精確的來說，協助那個blob hash要放在哪個tree中。根據<a href="http://schacon.github.io/gitbook/7_the_git_index.html">這邊</a>的說法，這個檔案可以協助</p>

<ul>
<li>提供產生tree object時需要的資料</li>
<li>提供比對working directory和tree的資訊</li>
<li>merge產生衝突時，可以從index取得的資料協助解決衝突。不過這邊不是很懂，就單純字面翻譯了。</li>
</ul>


<p><a name="gpkref"></a></p>

<h2>packed-refs</h2>

<p>簡單來說，考量效率，git提供pack ref目錄的功能，ref的概念請看前面背景知識。</p>

<p>一樣，看例子比較快。</p>

<p>先用<code>git show-ref</code>看看我們有哪些reference</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git show-ref
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304 refs/heads/master
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304 refs/remotes/origin/HEAD
</span><span class='line'>c86b440bafe24caecfe0dbfbbd73031a1bcd1178 refs/remotes/origin/gtk3
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304 refs/remotes/origin/master
</span><span class='line'>22da092eb00b78946fd70de24427d702a77b925b refs/remotes/origin/next-release
</span><span class='line'>98ff18f84fad4686012bf6183734eeb1ec5d7f46 refs/remotes/origin/show_web_search_in_popup_menu
</span><span class='line'>9542889d17d276321d6da2de8d1f9d95f76fb483 refs/remotes/origin/transparent_background
</span><span class='line'>7a3629ab3da7c609cf3698319ab606ebae0998e7 refs/tags/0.3.2@221
</span><span class='line'>f57350c72987263c2b745690bdc8013fbbd6067c refs/tags/0.3.3@243
</span><span class='line'>522d1dc2568b5c7c256e05ca69412480e1afcfb3 refs/tags/0.3.4
</span><span class='line'>8e9d9520125f64a0b894a5d575f0c2d98c3ec06b refs/tags/0.3.4@301
</span><span class='line'>7031115a8ea1151efc1536b43a509774ca2c0777 refs/tags/0.3.7
</span><span class='line'>3f4dcbe6e1aa0045fbeb9f1f761ce035e65defea refs/tags/1.1
</span><span class='line'>098d158c8d8a7ce7c6b2c5c47c967c6137beced2 refs/tags/1.2</span></code></pre></td></tr></table></div></figure>


<p>看看<code>packed-refs</code>裏面是三小？有沒有發現和上面很像啊？</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat .git/packed-refs 
</span><span class='line'>## pack-refs with: peeled fully-peeled 
</span><span class='line'>c86b440bafe24caecfe0dbfbbd73031a1bcd1178 refs/remotes/origin/gtk3
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304 refs/remotes/origin/master
</span><span class='line'>22da092eb00b78946fd70de24427d702a77b925b refs/remotes/origin/next-release
</span><span class='line'>98ff18f84fad4686012bf6183734eeb1ec5d7f46 refs/remotes/origin/show_web_search_in_popup_menu
</span><span class='line'>9542889d17d276321d6da2de8d1f9d95f76fb483 refs/remotes/origin/transparent_background
</span><span class='line'>7a3629ab3da7c609cf3698319ab606ebae0998e7 refs/tags/0.3.2@221
</span><span class='line'>f57350c72987263c2b745690bdc8013fbbd6067c refs/tags/0.3.3@243
</span><span class='line'>522d1dc2568b5c7c256e05ca69412480e1afcfb3 refs/tags/0.3.4
</span><span class='line'>8e9d9520125f64a0b894a5d575f0c2d98c3ec06b refs/tags/0.3.4@301
</span><span class='line'>7031115a8ea1151efc1536b43a509774ca2c0777 refs/tags/0.3.7
</span><span class='line'>3f4dcbe6e1aa0045fbeb9f1f761ce035e65defea refs/tags/1.1
</span><span class='line'>098d158c8d8a7ce7c6b2c5c47c967c6137beced2 refs/tags/1.2</span></code></pre></td></tr></table></div></figure>


<p>看一下ref目錄，上面的那些reference並不存在在<code>.git/ref</code>裏面</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ tree .git/refs/
</span><span class='line'>.git/refs/
</span><span class='line'>├── heads
</span><span class='line'>│   └── master
</span><span class='line'>├── remotes
</span><span class='line'>│   └── origin
</span><span class='line'>│       └── HEAD
</span><span class='line'>└── tags
</span><span class='line'>
</span><span class='line'>4 directories, 2 files</span></code></pre></td></tr></table></div></figure>


<p>好，生一個branch看看。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git checkout -b I_got_a_new_ref
</span><span class='line'>Switched to a new branch 'I_got_a_new_ref'</span></code></pre></td></tr></table></div></figure>


<p>喔喔！<code>.git/refs</code>出現了剛才產生的ref</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ tree .git/refs/
</span><span class='line'>.git/refs/
</span><span class='line'>├── heads
</span><span class='line'>│   ├── I_got_a_new_ref
</span><span class='line'>│   └── master
</span><span class='line'>├── remotes
</span><span class='line'>│   └── origin
</span><span class='line'>│       └── HEAD
</span><span class='line'>└── tags
</span><span class='line'>
</span><span class='line'>4 directories, 3 files</span></code></pre></td></tr></table></div></figure>


<p>跑一下<code>git gc</code>整理一下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git gc
</span><span class='line'>Counting objects: 5002, done.
</span><span class='line'>Delta compression using up to 4 threads.
</span><span class='line'>Compressing objects: 100% (1068/1068), done.
</span><span class='line'>Writing objects: 100% (5002/5002), done.
</span><span class='line'>Total 5002 (delta 3913), reused 5002 (delta 3913)</span></code></pre></td></tr></table></div></figure>


<p>疑？剛才的branch不見了。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ tree .git/refs/
</span><span class='line'>.git/refs/
</span><span class='line'>├── heads
</span><span class='line'>├── remotes
</span><span class='line'>│   └── origin
</span><span class='line'>│       └── HEAD
</span><span class='line'>└── tags
</span><span class='line'>
</span><span class='line'>4 directories, 1 file</span></code></pre></td></tr></table></div></figure>


<p>跑去pack-ref了</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat .git/packed-refs 
</span><span class='line'>## pack-refs with: peeled fully-peeled 
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304 refs/heads/I_got_a_new_ref
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304 refs/heads/master
</span><span class='line'>c86b440bafe24caecfe0dbfbbd73031a1bcd1178 refs/remotes/origin/gtk3
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304 refs/remotes/origin/master
</span><span class='line'>22da092eb00b78946fd70de24427d702a77b925b refs/remotes/origin/next-release
</span><span class='line'>98ff18f84fad4686012bf6183734eeb1ec5d7f46 refs/remotes/origin/show_web_search_in_popup_menu
</span><span class='line'>9542889d17d276321d6da2de8d1f9d95f76fb483 refs/remotes/origin/transparent_background
</span><span class='line'>7a3629ab3da7c609cf3698319ab606ebae0998e7 refs/tags/0.3.2@221
</span><span class='line'>f57350c72987263c2b745690bdc8013fbbd6067c refs/tags/0.3.3@243
</span><span class='line'>522d1dc2568b5c7c256e05ca69412480e1afcfb3 refs/tags/0.3.4
</span><span class='line'>8e9d9520125f64a0b894a5d575f0c2d98c3ec06b refs/tags/0.3.4@301
</span><span class='line'>7031115a8ea1151efc1536b43a509774ca2c0777 refs/tags/0.3.7
</span><span class='line'>3f4dcbe6e1aa0045fbeb9f1f761ce035e65defea refs/tags/1.1
</span><span class='line'>098d158c8d8a7ce7c6b2c5c47c967c6137beced2 refs/tags/1.2</span></code></pre></td></tr></table></div></figure>


<p><a name="gconf"></a></p>

<h2>config</h2>

<p>其實這個是個大哉問，就值得專門開一個章節討論。所以我整理到<a href="http://wen00072.github.io/blog/2015/03/08/introduction-to-git-config">這個頁面</a>，請自行前往閱讀。</p>

<p><a name="gorg_head"></a></p>

<h2>ORIG_HEAD</h2>

<p>這個檔案很有趣，一開始其實不存在。後來不知道怎麼突然跑出來，問了估狗和男人(man git reset)後得到的答案就是當reset的時候會把舊的HEAD hash放到這邊。為什麼要這樣做呢，當然是反悔用的。你可以<code>man git commit</code>找<code>ORIG_HEAD</code>就可以看看<code>git commit --amend</code>同效果的範例了。</p>

<p><a name="gdesc"></a></p>

<h2>description</h2>

<p>懶得解釋，跳過</p>

<p><a name="ghead"></a></p>

<h2>HEAD</h2>

<p>望文生義，當然是指向目前所在的commit。</p>

<p>等等！</p>

<p>指向目前所在的commit是三小？
一樣，來看例子。</p>

<p>目前clone下來，裏面放的是一個檔案，檔案裏面是什麼呢？一樣是個commit HASH</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat .git/HEAD 
</span><span class='line'>ref: refs/heads/master
</span><span class='line'>
</span><span class='line'>$ cat .git/refs/heads/master
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304
</span><span class='line'>
</span><span class='line'>$ git cat-file -t fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304
</span><span class='line'>commit</span></code></pre></td></tr></table></div></figure>


<p>那我直接checkout一個不是branch的可以嘛？當然沒問題。
可以看到git會把你checkout的commit HASH寫入.git/HEAD</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ strace git checkout 93f0addca5b2723ff0f1b744b032f359
</span><span class='line'>...
</span><span class='line'>open("/tmp/pcmanx/.git/HEAD.lock", O_RDWR|O_CREAT|O_EXCL, 0666) = 3
</span><span class='line'>write(3, "93f0addca5b2723ff0f1b744b032f359"..., 40) = 40
</span><span class='line'>write(3, "\n", 1)                       = 1
</span><span class='line'>close(3)                                = 0
</span><span class='line'>...
</span><span class='line'>rename("/tmp/pcmanx/.git/HEAD.lock", "/tmp/pcmanx/.git/HEAD") = 0
</span><span class='line'>...
</span><span class='line'>
</span><span class='line'>$ cat .git/HEAD 
</span><span class='line'>93f0addca5b2723ff0f1b744b032f359938a286d</span></code></pre></td></tr></table></div></figure>


<p><a name="g_1st_dir"></a></p>

<h2>第一層目錄</h2>

<ul>
<li><a href="#g_1st_dir_br">branches</a></li>
<li><a href="#g_1st_dir_hk">hooks</a></li>
<li><a href="#g_1st_dir_inf">info</a></li>
<li><a href="#g_1st_dir_log">logs</a></li>
<li><a href="#g_1st_dir_obj">objects</a></li>
<li><a href="#g_1st_dir_ref">refs</a></li>
</ul>


<p><a name="g_1st_dir_br"></a></p>

<h2>branches</h2>

<p>快過期的東西(<a href="http://git-scm.com/docs/gitrepository-layout">出處</a>)，跳過。</p>

<p><a name="g_1st_dir_hk"></a></p>

<h2>hooks</h2>

<p>hook，這個翻成中文很鳥，保留原文。基本上就是一組callback，特定的時候會去呼叫。我目前生意沒有做很大，有需要再去看。列出預設的檔案如下</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ll .git/hooks/
</span><span class='line'>total 48
</span><span class='line'>drwxrwxr-x 2 wen wen 4096 Mar  9 23:10 ./
</span><span class='line'>drwxrwxr-x 8 wen wen 4096 Mar  9 23:21 ../
</span><span class='line'>-rwxrwxr-x 1 wen wen  452 Mar  9 23:10 applypatch-msg.sample*
</span><span class='line'>-rwxrwxr-x 1 wen wen  896 Mar  9 23:10 commit-msg.sample*
</span><span class='line'>-rwxrwxr-x 1 wen wen  189 Mar  9 23:10 post-update.sample*
</span><span class='line'>-rwxrwxr-x 1 wen wen  398 Mar  9 23:10 pre-applypatch.sample*
</span><span class='line'>-rwxrwxr-x 1 wen wen 1642 Mar  9 23:10 pre-commit.sample*
</span><span class='line'>-rwxrwxr-x 1 wen wen 1239 Mar  9 23:10 prepare-commit-msg.sample*
</span><span class='line'>-rwxrwxr-x 1 wen wen 1348 Mar  9 23:10 pre-push.sample*
</span><span class='line'>-rwxrwxr-x 1 wen wen 4898 Mar  9 23:10 pre-rebase.sample*
</span><span class='line'>-rwxrwxr-x 1 wen wen 3611 Mar  9 23:10 update.sample*</span></code></pre></td></tr></table></div></figure>


<p><a name="g_1st_dir_inf"></a></p>

<h2>info</h2>

<p>儲存資訊，廢話。目前裏面只有一個exclude，而且檔案內容還都是註解。但是<a href="http://git-scm.com/docs/gitrepository-layout">這邊</a>有說還有其他檔案。另外值得提的是exclude說明有提到<code>.gitignore</code>針對的是<code>git status</code>, <code>git rm</code>, <code>git add</code>, <code>git clean</code>。其他的操作還是得在<code>.git/log/exclude</code>中設定。</p>

<p><a name="g_1st_dir_log"></a></p>

<h2>logs</h2>

<p>這是存放log的地方。log是什麼呢？直接看個例子。</p>

<p>我們先新增一個測試檔案</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ touch test2
</span><span class='line'>$ git add test2
</span><span class='line'>$ git commit test2 -m "test2"
</span><span class='line'>[master 09580e4] test2
</span><span class='line'> 1 file changed, 0 insertions(+), 0 deletions(-)
</span><span class='line'> create mode 100644 test2</span></code></pre></td></tr></table></div></figure>


<p>執行<code>git reflog</code>，可以看到你剛才的動作以及有當次HEAD的commit HASH已經被記起來。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git reflog 
</span><span class='line'>09580e4 HEAD@{0}: commit: test2
</span><span class='line'>fd5d6ab HEAD@{1}: checkout: moving from 93f0addca5b2723ff0f1b744b032f359938a286d to master
</span><span class='line'>93f0add HEAD@{2}: checkout: moving from master to 93f0addca5b2723ff0f1b744b032f359938a286d
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>這東西有什麼用處呢？當然是讓你反悔用的。再來看個例子</p>

<p>首先開一個branch</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git checkout -b demo_reflog
</span><span class='line'>Switched to a new branch 'demo_reflog'</span></code></pre></td></tr></table></div></figure>


<p>新增並commit file1</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ touch file1
</span><span class='line'>$ git add file1
</span><span class='line'>$ git commit file1 -m "file 1"
</span><span class='line'>[demo_reflog c982c70] file 1
</span><span class='line'> 1 file changed, 0 insertions(+), 0 deletions(-)
</span><span class='line'> create mode 100644 file1</span></code></pre></td></tr></table></div></figure>


<p>然後新增並commit file2</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ touch file2
</span><span class='line'>$ git add file2
</span><span class='line'>$ git commit file2 -m "file 2"
</span><span class='line'>[demo_reflog b85f4d4] file 2
</span><span class='line'> 1 file changed, 0 insertions(+), 0 deletions(-)
</span><span class='line'> create mode 100644 file2</span></code></pre></td></tr></table></div></figure>


<p>切回master並且宰掉剛才的branch</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git checkout master 
</span><span class='line'>Switched to branch 'master'
</span><span class='line'>Your branch is up-to-date with 'origin/master'.
</span><span class='line'>
</span><span class='line'>$ git branch -D demo_reflog  
</span><span class='line'>Deleted branch demo_reflog (was b85f4d4).</span></code></pre></td></tr></table></div></figure>


<p>假設上一個動作是手滑誤刪，能不能反悔。
YES YOU CAN!</p>

<p>先看看log</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git reflog 
</span><span class='line'>fd5d6ab HEAD@{0}: checkout: moving from demo_reflog to master
</span><span class='line'>b85f4d4 HEAD@{1}: commit: file 2
</span><span class='line'>c982c70 HEAD@{2}: commit: file 1
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>可以知道上次branch最後commit的HASH，那麼我們就可以切過去然後開另外一個branch了。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git checkout -b i_am_back b85f4d4
</span><span class='line'>Switched to a new branch 'i_am_back'</span></code></pre></td></tr></table></div></figure>


<p>可以看到資料回來了。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git log --pretty=oneline --abbrev-commit
</span><span class='line'>b85f4d4 file 2
</span><span class='line'>c982c70 file 1
</span><span class='line'>fd5d6ab Fix invisible cairo caret issue.
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>當然這還是險招，git本身保留是有保存期限的。有興趣問男人。<code>man git gc</code></p>

<p>不知道有沒有會問：「啊不是要介紹<code>.git/logs</code>嘛？」</p>

<p>問得好！猜猜剛才git reflogs檔案從哪裡讀出來？</p>

<p>一樣請出strace大大</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ strace -e open git reflog 
</span><span class='line'>...
</span><span class='line'>open("/tmp/pcmanx/.git/logs/HEAD", O_RDONLY) = 3
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>有看到<code>.git/logs/HEAD</code>吧？有沒有想看一下裏面是啥？至少我想看。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat .git/logs/HEAD
</span><span class='line'>...
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304 c982c70f00875b83e4845ca35ef0ca4c70f73e64 Wen.Liao &lt;censored&gt; 1425997414 +0800  commit: file 1
</span><span class='line'>c982c70f00875b83e4845ca35ef0ca4c70f73e64 b85f4d4dca4012a2d1785750061fae9e03e817e1 Wen.Liao &lt;censored&gt; 1425997438 +0800  commit: file 2
</span><span class='line'>b85f4d4dca4012a2d1785750061fae9e03e817e1 fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304 Wen.Liao &lt;censored&gt; 1425997673 +0800  checkout: moving from demo_reflog to master
</span><span class='line'>fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304 b85f4d4dca4012a2d1785750061fae9e03e817e1 Wen.Liao &lt;censored&gt; 1425997732 +0800  checkout: moving from master to b85f4d4
</span><span class='line'>b85f4d4dca4012a2d1785750061fae9e03e817e1 b85f4d4dca4012a2d1785750061fae9e03e817e1 Wen.Liao &lt;censored&gt; 1425997746 +0800  checkout: moving from b85f4d4dca4012a2d1785750061fae9e03e817e1 to i_am_back</span></code></pre></td></tr></table></div></figure>


<p>精確的來說，<code>.git/logs</code>下面不只紀錄HEAD的log，還有各種ref的log。有興趣的朋友可以自行參考<a href="http://git-scm.com/docs/gitrepository-layout">這邊</a>，並且進去目錄逛逛。</p>

<p><a name="g_1st_dir_obj"></a></p>

<h2>objects</h2>

<p>先看剛clone下來的目錄結構</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ tree .git/objects/
</span><span class='line'>.git/objects/
</span><span class='line'>├── info
</span><span class='line'>└── pack
</span><span class='line'>    ├── pack-6042320de285747900cc3263a47f7bab429cabf8.idx
</span><span class='line'>    └── pack-6042320de285747900cc3263a47f7bab429cabf8.pack</span></code></pre></td></tr></table></div></figure>


<p>來生一個目錄和並且commit一個東西進去。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mkdir tree
</span><span class='line'>$ echo test &gt; tree/file
</span><span class='line'>$ git add tree/file 
</span><span class='line'>$ git commit tree/file -m "test tree and file"
</span><span class='line'>[master 2ba01ef] test tree and file
</span><span class='line'> 1 file changed, 1 insertion(+)
</span><span class='line'> create mode 100644 tree/file</span></code></pre></td></tr></table></div></figure>


<p>然後看看這個目錄變化吧</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ tree .git/objects/
</span><span class='line'>.git/objects/
</span><span class='line'>├── 2b
</span><span class='line'>│   └── a01ef5583f35dd57b5fb5bde732f73bc315b6d
</span><span class='line'>├── 9d
</span><span class='line'>│   └── aeafb9864cf43055ae93beb0afd6c7d144bfa4
</span><span class='line'>├── de
</span><span class='line'>│   └── f69c2c316574aaf328e546486fa750eb9c53a0
</span><span class='line'>├── e1
</span><span class='line'>│   └── b8ecbb1f19709f3a4867a0ffe08bb2e07acf19
</span><span class='line'>├── info
</span><span class='line'>└── pack
</span><span class='line'>    ├── pack-6042320de285747900cc3263a47f7bab429cabf8.idx
</span><span class='line'>    └── pack-6042320de285747900cc3263a47f7bab429cabf8.pack
</span><span class='line'>
</span><span class='line'>6 directories, 6 files</span></code></pre></td></tr></table></div></figure>


<p>接下來把目錄和檔案混起來，用<code>git cat-file -p</code>看看裏面是啥</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git cat-file -p 2ba01ef5583f35dd57b5fb5bde732f73bc315b6d
</span><span class='line'>tree def69c2c316574aaf328e546486fa750eb9c53a0
</span><span class='line'>parent fd5d6abe34f41f8687c1fc5e2ab0a2f65c570304
</span><span class='line'>author Wen.Liao &lt;censored&gt; 1425999641 +0800
</span><span class='line'>committer Wen.Liao &lt;censored&gt; 1425999641 +0800
</span><span class='line'>
</span><span class='line'>test tree and file</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git cat-file -p 9daeafb9864cf43055ae93beb0afd6c7d144bfa4
</span><span class='line'>test</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git cat-file -p def69c2c316574aaf328e546486fa750eb9c53a0
</span><span class='line'>100644 blob 5bc4b3f69d730535eb3a8aee28d7ef9273225d50  .gitignore
</span><span class='line'>...
</span><span class='line'>040000 tree e1b8ecbb1f19709f3a4867a0ffe08bb2e07acf19  tree</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git cat-file -p e1b8ecbb1f19709f3a4867a0ffe08bb2e07acf19
</span><span class='line'>100644 blob 9daeafb9864cf43055ae93beb0afd6c7d144bfa4  file</span></code></pre></td></tr></table></div></figure>


<p>其實不難猜，你local commit的東西會被處理後變成object，並且依照hash分門別類地存放。</p>

<p>接下來我們來做個測試</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git gc
</span><span class='line'>Counting objects: 5006, done.
</span><span class='line'>Delta compression using up to 4 threads.
</span><span class='line'>Compressing objects: 100% (1070/1070), done.
</span><span class='line'>Writing objects: 100% (5006/5006), done.
</span><span class='line'>Total 5006 (delta 3914), reused 5001 (delta 3913)</span></code></pre></td></tr></table></div></figure>


<p>可以看到，剛才的目錄全部消失，而pack目錄的檔案名稱也和前面的不同了。對照上面<code>git gc</code>的訊息，可以知道<code>git gc</code>做了壓縮，並且將這些object一起壓到pack目錄的檔案中了。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ tree .git/objects/
</span><span class='line'>.git/objects/
</span><span class='line'>├── info
</span><span class='line'>│   └── packs
</span><span class='line'>└── pack
</span><span class='line'>    ├── pack-57d163604c430e1919a18e97c5b1312291b62721.idx
</span><span class='line'>    └── pack-57d163604c430e1919a18e97c5b1312291b62721.pack
</span><span class='line'>
</span><span class='line'>2 directories, 3 files</span></code></pre></td></tr></table></div></figure>


<p>所以我們可以從觀察中做出結論。Git object的存放有兩種型式</p>

<ul>
<li>loose object：就是剛才看到用[HASH前兩碼]/[剩下HASH] 的目錄檔案結構</li>
<li>packed object: 把object壓縮成兩個檔案</li>
</ul>


<p>而looose object型式經過<code>git gc</code>後會有可能轉換成packed object，反之亦然。詳細規則問男人。
由於<code>git gc</code>是用來<strong>清除</strong>和<strong>整理</strong>local repository，也就是說做了<code>git gc</code>是有可能刪除用不到的資料。詳細情況一樣請問男人<code>man git gc</code></p>

<p><a name="g_1st_dir_ref"></a></p>

<h2>refs</h2>

<ul>
<li><a href="#g_bkg">背景知識</a>和<a href="#gpkref">packed-ref</a>有提到，就不要拖台錢了。</li>
</ul>


<p><a name="g_ref"></a></p>

<h2>參考資料</h2>

<ul>
<li><a href="http://stackoverflow.com/questions/4084921/what-does-the-git-index-contain-exactly">Stackoverflow: What does the git index contain EXACTLY?</a></li>
<li><a href="http://schacon.github.io/gitbook/7_the_git_index.html">Git Community Book: The Git Index</a></li>
<li><a href="http://stackoverflow.com/questions/964876/head-and-orig-head-in-git">Stackoverflow: HEAD and ORIG_HEAD in Git</a></li>
<li><a href="http://git-scm.com/book/en/v2/Git-Internals-Git-Objects">ProGit: 10.2 Git Internals - Git Objects</a></li>
<li><a href="http://gitready.com/advanced/2009/03/23/whats-inside-your-git-directory.html">what&rsquo;s inside your .git directory</a></li>
<li><a href="http://git-scm.com/docs/git-pack-refs">git-pack-refs - Pack heads and tags for efficient repository access</a></li>
<li><a href="http://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_git_config">ProGit: 8.1 Customizing Git - Git Configuration</a></li>
<li><a href="http://git-scm.com/docs/gitrepository-layout">gitrepository-layout - Git Repository Layout</a></li>
<li><a href="http://schacon.github.io/gitbook/7_how_git_stores_objects.html">Git Community Book: How Git Stores Objects</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/08/introduction-to-git-config/">ProGit: Customizing Git - Git Configuration導讀</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-08T22:12:00+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:12 pm</span></time>
        
           | <a href="/blog/2015/03/08/introduction-to-git-config/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/03/08/introduction-to-git-config/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>目錄</h2>

<ul>
<li><a href="#g3_conf_env">測試環境</a></li>
<li><a href="#g3_conf_use">簡易使用方式</a></li>
<li><a href="#g3_conf_file">git config參考檔案以及順序</a></li>
<li><a href="#g3_conf_opt">git config 選項節錄</a>

<ul>
<li><a href="#g3_conf_ext">指定使用外部比較命令</a></li>
</ul>
</li>
<li><a href="#g3_conf_ref">參考資料</a></li>
</ul>


<p><a name="g3_conf_env"></a></p>

<h2>測試環境</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lsb_release -a
</span><span class='line'>No LSB modules are available.
</span><span class='line'>Distributor ID:   Ubuntu
</span><span class='line'>Description:  Ubuntu 14.04.2 LTS
</span><span class='line'>Release:  14.04
</span><span class='line'>Codename: trusty
</span><span class='line'>
</span><span class='line'>$ git --version
</span><span class='line'>git version 2.3.0
</span><span class='line'>
</span><span class='line'>$ git remote -v
</span><span class='line'>origin    https://github.com/pcman-bbs/pcmanx.git (fetch)
</span><span class='line'>origin    https://github.com/pcman-bbs/pcmanx.git (push)</span></code></pre></td></tr></table></div></figure>


<p><a name="g3_conf_use"></a></p>

<h2>簡易使用方式</h2>

<p>最簡單的使用方式</p>

<ul>
<li>新增/更改選項

<ul>
<li>git config 型態 名稱 你要設定的值

<ul>
<li>常見的型態有<code>--system</code>或是<code>--global</code></li>
</ul>
</li>
</ul>
</li>
<li>讀取選項

<ul>
<li>git config &ndash;get 名稱</li>
</ul>
</li>
</ul>


<p>值得注意的是，git config 的名稱一般來說會使用<code>.</code>作為分類的參考如
<code>git config test.user.name.first Liao</code>
<code>git config test.user.name.last Wen</code>
而在設定檔中，會用<code>[]</code>把第一個<code>.</code>的前面的字串放在前面，然後最後一個<code>.</code>後面的字串和你要設定的值變成
* <code>最後一個.後面的字串=你要設定的值</code></p>

<p>你應該要問，那中間的呢？好問題，中間的就放在<code>[]</code>裏面囉。</p>

<p>很模糊？看例子比較快。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git config test.user.name.first Liao
</span><span class='line'>$ git config test.user.name.last Wen
</span><span class='line'>$ cat .git/config
</span><span class='line'>...
</span><span class='line'>[test "user.name"]
</span><span class='line'>  first = Liao
</span><span class='line'>  last = Wen</span></code></pre></td></tr></table></div></figure>


<p><a name="g3_conf_file"></a></p>

<h2>git config參考檔案以及順序</h2>

<p>要注意的是/etc/gitconfig不一定存在，我的是沒有。所以生一個測試驗證用。</p>

<ul>
<li><code>/etc/gitconfig</code>

<ul>
<li>由<code>git config --system</code>產生</li>
</ul>
</li>
<li><code>~/.gitconfig</code>

<ul>
<li>由<code>git config --global</code>產生</li>
</ul>
</li>
<li><code>你的local repostiory/.git/config</code>

<ul>
<li>在<code>你的local repostiory</code>下面執行<code>git config</code>產生</li>
</ul>
</li>
</ul>


<p>檔案讀取順序是由上往下，全部都有資料的話。最後回傳值順序是由下而上。
要練習驗證，所以來看一下。</p>

<p>用strace看<code>git config --get user.name</code>開檔案的順序。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ strace -e open git config --get user.name
</span><span class='line'>...
</span><span class='line'>open("/etc/gitconfig", O_RDONLY)        = 3
</span><span class='line'>open("/home/user/.gitconfig", O_RDONLY)  = 3
</span><span class='line'>open(".git/config", O_RDONLY)           = 3
</span><span class='line'>...
</span><span class='line'>Wen.Liao
</span><span class='line'>+++ exited with 0 +++</span></code></pre></td></tr></table></div></figure>


<p>可以看到<code>/etc/gitcnfig</code>沒有user.name</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat /etc/gitconfig  | grep name</span></code></pre></td></tr></table></div></figure>


<p><code>~/.gitconfig</code>下有Wen.Liao的字串</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat ~/.gitconfig 
</span><span class='line'>[user]
</span><span class='line'>  name = Wen.Liao
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>同樣的，目前repository下面的config是沒有user.name資料</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat .git/config  | grep name</span></code></pre></td></tr></table></div></figure>


<p>接下來改一下user.name</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ strace -e open git config user.name qqq
</span><span class='line'>...
</span><span class='line'>open("/etc/gitconfig", O_RDONLY)        = 3
</span><span class='line'>open("/home/user/.gitconfig", O_RDONLY)  = 3
</span><span class='line'>open(".git/config", O_RDONLY)           = 3
</span><span class='line'>...
</span><span class='line'>+++ exited with 0 +++</span></code></pre></td></tr></table></div></figure>


<p>可以看到目前目錄下<code>.git/config</code>新增了user.name</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat .git/config 
</span><span class='line'>...
</span><span class='line'>[user]
</span><span class='line'>  name = qqq</span></code></pre></td></tr></table></div></figure>


<p>驗證是否<code>.git/config</code>的值真的會比<code>~/.gitconfig</code>優先</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git config --get user.name
</span><span class='line'>qqq</span></code></pre></td></tr></table></div></figure>


<p><a name="g3_conf_opt"></a></p>

<h2>git config 選項節錄</h2>

<p>Git config 選項有分為server端和client端，大部分選項和client有關，文件中節錄部份，我再節錄我有興趣的部份。想要知道全部的選項可以問男人。<code>man git config</code>。再次提醒，如果是你要套用到全部git repository請用<code>git config --global</code>，不然這些選項只會在你目前git repository生效。</p>

<ul>
<li><code>core.editor</code>

<ul>
<li>你要commit 時候會用的編輯器</li>
</ul>
</li>
<li><code>commit.template</code>

<ul>
<li>這個比較重要，如果你要套用commit template，就用這個。把你自己或是團隊的commit template引入吧。我自己會用# 為template加入註解。</li>
</ul>
</li>
<li><code>color.ui</code>

<ul>
<li>為你的UI文字上色。可以設成<code>true</code> 或是<code>false</code></li>
</ul>
</li>
</ul>


<p><a name="g3_conf_ext"></a></p>

<h2>指定使用外部比較命令</h2>

<p>git可以指令使用外部比較命令，首先要搞清楚git 會送什麼參數給外部命令，所以我們先寫個script印出參數，並且指定外部diff的時候使用這個script。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat ~/bin/git_diff.sh 
</span><span class='line'>#!/bin/sh
</span><span class='line'>echo $@
</span><span class='line'>
</span><span class='line'>$ git config --global diff.external ~/bin/git_diff.sh
</span><span class='line'>
</span><span class='line'>$ git diff HEAD^
</span><span class='line'>src/core/caret.cpp /tmp/6nZQoO_caret.cpp 99fdca2d1d2b90e6452555572d3b0c3cf3ae75b0 100644 src/core/caret.cpp 15b662547eb5a853f02a6fc086e07feed2e45d4f 100644</span></code></pre></td></tr></table></div></figure>


<p>這些參數的順序是</p>

<p>1 更動的檔案名稱
2 將被更動前的檔案內容另存新檔路徑
3 被更動前的檔案blob hash
4 被更動前檔案權限
5 將被更動後的檔案內容另存新檔路徑
6 被更動後的檔案blob hash
7 被更動後檔案權限</p>

<p>對我們來說，有興趣的是2和5，所以我們可以將命令更動為</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat ~/bin/git_diff.sh 
</span><span class='line'>#!/bin/sh -x
</span><span class='line'>echo $@
</span><span class='line'>meld $2 $5</span></code></pre></td></tr></table></div></figure>


<p>meld是一個GUI程式的比對工具。接下來就來測試吧</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git diff HEAD^
</span><span class='line'>+ echo src/core/caret.cpp /tmp/0M6Fgi_caret.cpp 99fdca2d1d2b90e6452555572d3b0c3cf3ae75b0 100644 src/core/caret.cpp 15b662547eb5a853f02a6fc086e07feed2e45d4f 100644
</span><span class='line'>src/core/caret.cpp /tmp/0M6Fgi_caret.cpp 99fdca2d1d2b90e6452555572d3b0c3cf3ae75b0 100644 src/core/caret.cpp 15b662547eb5a853f02a6fc086e07feed2e45d4f 100644
</span><span class='line'>+ meld /tmp/0M6Fgi_caret.cpp src/core/caret.cpp</span></code></pre></td></tr></table></div></figure>


<p>GUI畫面如下:
<img src="https://www.dropbox.com/s/h68sor0kwkwtewg/meld_git.png?raw=1" alt="" /></p>

<p>手冊上面還有提到merge tools 的設定，本人不感興趣。跳過。</p>

<p><a name="g3_conf_ref"></a></p>

<h2>參考資料</h2>

<ul>
<li><a href="http://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_git_config">ProGit: 8.1 Customizing Git - Git Configuration</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/06/talk-about-git-remote/">談談git Remote</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-06T07:15:00+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>7:15 am</span></time>
        
           | <a href="/blog/2015/03/06/talk-about-git-remote/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/03/06/talk-about-git-remote/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在軟體專案開發常常會需要比對不同的repository。舉例來說，你可能在遠端有一套軟體專案，這個專案是從upstream fork 下來，那麼如果要把upstream 新的功能合併到專案，人肉合併往往是最容易出錯又最沒效率的方式。如果這兩個專案都有git，那麼git remote就是你的救星。針對剛才講的更詳細的use case可以看<a href="https://help.github.com/articles/configuring-a-remote-for-a-fork/">Git Hub的範例</a></p>

<p>直接拿Use case範例，不囉唆。
Demo情境</p>

<ul>
<li>有兩個遠端repositories: repo1, repo2</li>
<li>將repo1 clone下來到local repository，另外一個透過git remote加入到local repository</li>
<li>在local建立一個branch，對應到repo2</li>
<li>merge repo1到repo2

<ul>
<li>要注意的是其實以upstream 情況是剛好相反，一般來說repo1，也就是你clone的才是你要開發的專案。選擇這樣的case單純只是吃飽撐著。</li>
</ul>
</li>
</ul>


<p>詳細行為範例如下</p>

<ul>
<li><a href="#g2_env">建立測試環境</a></li>
<li><a href="#g2_rt_url">新增remote URL</a></li>
<li><a href="#g2_rt_branch">建立對應remote URL的local branch</a></li>
<li><a href="#g2_rt_merge">在local合併兩個Romote Branch</a></li>
<li><a href="#g2_ref">參考資料</a></li>
</ul>


<p><a name="g2_env"></a></p>

<h2>建立測試環境</h2>

<p>產生兩個遠端repositories: repo1, repo2</p>

<h2>repo1</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mkdir remote_repo1
</span><span class='line'>$ cd remote_repo1/
</span><span class='line'>$ git init .
</span><span class='line'>Initialized empty Git repository in /tmp/remote_repo1/.git/
</span><span class='line'>$ echo "repo1" &gt; myfile
</span><span class='line'>$ git add myfile 
</span><span class='line'>$ git commit myfile -m "init"
</span><span class='line'>[master (root-commit) 043d3c6] init
</span><span class='line'> 1 file changed, 1 insertion(+)
</span><span class='line'> create mode 100644 myfile</span></code></pre></td></tr></table></div></figure>


<h2>repo2</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd ../
</span><span class='line'>$ mkdir remote_repo2
</span><span class='line'>$ cd remote_repo2/
</span><span class='line'>$ git init .
</span><span class='line'>Initialized empty Git repository in /tmp/remote_repo2/.git/
</span><span class='line'>$ echo "repo2" &gt; myfile
</span><span class='line'>$ git add myfile 
</span><span class='line'>$ git commit myfile -m "init"
</span><span class='line'>[master (root-commit) 5c329bf] init
</span><span class='line'> 1 file changed, 1 insertion(+)
</span><span class='line'> create mode 100644 myfile</span></code></pre></td></tr></table></div></figure>


<h2>看一下目錄架構</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd ../
</span><span class='line'>$ tree remote_repo1 remote_repo2/
</span><span class='line'>remote_repo1
</span><span class='line'>└── myfile
</span><span class='line'>remote_repo2/
</span><span class='line'>└── myfile</span></code></pre></td></tr></table></div></figure>


<p><a name="g2_rt_url"></a></p>

<h2>新增remote URL</h2>

<p>就 git clone，沒啥好說</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git clone remote_repo1/ local_repo
</span><span class='line'>Cloning into 'local_repo'...
</span><span class='line'>done.
</span><span class='line'>$ cd local_repo/
</span><span class='line'>$ git remote -v
</span><span class='line'>origin    /tmp/remote_repo1/ (fetch)
</span><span class='line'>origin    /tmp/remote_repo1/ (push)</span></code></pre></td></tr></table></div></figure>


<p><a name="g2_rt_branch"></a></p>

<h2>建立對應remote URL的local branch</h2>

<p>我們用了<code>git remote add 本地如何稱呼remote remote的URL</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git remote add repo2 /tmp/remote_repo2/
</span><span class='line'>$ git remote -v
</span><span class='line'>origin    /tmp/remote_repo1/ (fetch)
</span><span class='line'>origin    /tmp/remote_repo1/ (push)
</span><span class='line'>repo2 /tmp/remote_repo2/ (fetch)
</span><span class='line'>repo2 /tmp/remote_repo2/ (push)</span></code></pre></td></tr></table></div></figure>


<p>接下來把remote URL的repository 拉下來</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git fetch repo2
</span><span class='line'>warning: no common commits
</span><span class='line'>remote: Counting objects: 3, done.
</span><span class='line'>remote: Total 3 (delta 0), reused 0 (delta 0)
</span><span class='line'>Unpacking objects: 100% (3/3), done.
</span><span class='line'>From /tmp/remote_repo2
</span><span class='line'> * [new branch]      master     -&gt; repo2/master</span></code></pre></td></tr></table></div></figure>


<p>然後建立一個branch，對應到repo2的master</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git checkout -b local_repo2 repo2/master
</span><span class='line'>Branch local_repo2 set up to track remote branch master from repo2.
</span><span class='line'>Switched to a new branch 'local_repo2'
</span><span class='line'>
</span><span class='line'>$ git branch -a
</span><span class='line'>* local_repo2
</span><span class='line'>  master
</span><span class='line'>  remotes/origin/HEAD -&gt; origin/master
</span><span class='line'>  remotes/origin/master
</span><span class='line'>  remotes/repo2/master
</span><span class='line'>
</span><span class='line'>$ git diff master 
</span><span class='line'>diff --git a/myfile b/myfile
</span><span class='line'>index 464d9cd..27d38ae 100644
</span><span class='line'> a/myfile
</span><span class='line'>+++ b/myfile
</span><span class='line'>@@ -1 +1 @@
</span><span class='line'>-repo1
</span><span class='line'>+repo2</span></code></pre></td></tr></table></div></figure>


<p><a name="g2_rt_merge"></a></p>

<h2>在local合併兩個Romote Branch</h2>

<p>剩下非常直覺，就把兩個local branch merge，整理完衝突收工。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git merge master 
</span><span class='line'>Auto-merging myfile
</span><span class='line'>CONFLICT (add/add): Merge conflict in myfile
</span><span class='line'>Automatic merge failed; fix conflicts and then commit the result.
</span><span class='line'>
</span><span class='line'>$ git status 
</span><span class='line'>On branch local_repo2
</span><span class='line'>Your branch is up-to-date with 'repo2/master'.
</span><span class='line'>You have unmerged paths.
</span><span class='line'>  (fix conflicts and run "git commit")
</span><span class='line'>
</span><span class='line'>Unmerged paths:
</span><span class='line'>  (use "git add &lt;file&gt;..." to mark resolution)
</span><span class='line'>
</span><span class='line'>  both added:      myfile
</span><span class='line'>
</span><span class='line'>no changes added to commit (use "git add" and/or "git commit -a")
</span><span class='line'>
</span><span class='line'>$ cat myfile 
</span><span class='line'>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
</span><span class='line'>repo2
</span><span class='line'>=======
</span><span class='line'>repo1
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; master
</span><span class='line'>$ echo shut-up &gt; myfile 
</span><span class='line'>
</span><span class='line'>$ git add myfile 
</span><span class='line'>
</span><span class='line'>$ git commit -m "Overwrite myfile"
</span><span class='line'>[local_repo2 a76c0a6] Overwrite myfile</span></code></pre></td></tr></table></div></figure>


<p><font color="red"/font>請注意這個case不能夠把更動push 回repo2/master 會噴錯誤如下</font></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git push repo2 
</span><span class='line'>warning: push.default is unset; its implicit value has changed in
</span><span class='line'>Git 2.0 from 'matching' to 'simple'. To squelch this message
</span><span class='line'>and maintain the traditional behavior, use:
</span><span class='line'>
</span><span class='line'>  git config --global push.default matching
</span><span class='line'>
</span><span class='line'>To squelch this message and adopt the new behavior now, use:
</span><span class='line'>
</span><span class='line'>  git config --global push.default simple
</span><span class='line'>
</span><span class='line'>When push.default is set to 'matching', git will push local branches
</span><span class='line'>to the remote branches that already exist with the same name.
</span><span class='line'>
</span><span class='line'>Since Git 2.0, Git defaults to the more conservative 'simple'
</span><span class='line'>behavior, which only pushes the current branch to the corresponding
</span><span class='line'>remote branch that 'git pull' uses to update the current branch.
</span><span class='line'>
</span><span class='line'>See 'git help config' and search for 'push.default' for further information.
</span><span class='line'>(the 'simple' mode was introduced in Git 1.7.11. Use the similar mode
</span><span class='line'>'current' instead of 'simple' if you sometimes use older versions of Git)
</span><span class='line'>
</span><span class='line'>fatal: The upstream branch of your current branch does not match
</span><span class='line'>the name of your current branch.  To push to the upstream branch
</span><span class='line'>on the remote, use
</span><span class='line'>
</span><span class='line'>    git push repo2 HEAD:master
</span><span class='line'>
</span><span class='line'>To push to the branch of the same name on the remote, use
</span><span class='line'>
</span><span class='line'>    git push repo2 local_repo2
</span><span class='line'>
</span><span class='line'>To choose either option permanently, see push.default in 'git help config'.</span></code></pre></td></tr></table></div></figure>


<p>簡單翻譯一下，目前local branch名稱在repo2上面沒有，你要嘛</p>

<ul>
<li>指定push到repo2的master: <code>git push repo2 HEAD:master</code></li>
<li>要嘛指定push local branch到repo2 repository上</li>
</ul>


<p>第一個情況需要bared repository，時間關係有空再談。</p>

<p><a name="g2_ref"></a></p>

<h2>參考資料</h2>

<ul>
<li><a href="http://git-scm.com/book/en/v2/Git-Basics-Working-with-Remotes">ProGit: 2.5 Git Basics - Working with Remotes</a></li>
<li><a href="http://git-scm.com/book/en/v2/Git-Branching-Remote-Branches">ProGit: 3.5 Git Branching - Remote Branches</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/28/island-the-boom/">島唄 - the Boom</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-28T15:14:00+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>3:14 pm</span></time>
        
           | <a href="/blog/2015/02/28/island-the-boom/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/02/28/island-the-boom/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>這是一首反省二戰日本政府在沖繩島的決策造成大量當地人冤死悲劇的歌曲。</p>

<p>在二次大戰末期，米軍開始準備入侵日本本島，因此需要佔領沖繩作為前進基地。當時的日本政府在當地強徵年輕男女學生在戰場上做雜務以及醫療協助。同時大力宣傳米軍的邪惡形象，宣稱米軍殘暴邪惡，表示與其被米軍俘虜生不如死，不如自殺比較痛快。網路上可以看到<a href="http://zh.wikipedia.org/zh-tw/%E6%B2%96%E7%B9%A9%E5%B3%B6%E6%88%B0%E5%BD%B9#.E8.87.AA.E6.AE.BA.E5.91.BD.E4.BB.A4.E7.88.AD.E8.AD.B0">日本政府會發手榴彈給當地居民的資料</a>。加上日本政府強力徵收糧食，估計戰役結束後平民死亡人數預估超過十萬人(<a href="http://zh.wikipedia.org/zh-tw/%E6%B2%96%E7%B9%A9%E5%B3%B6%E6%88%B0%E5%BD%B9#.E5.B9.B3.E6.B0.91.E5.82.B7.E4.BA.A1">出處</a>)。</p>

<p>回到主題，這首歌是1992年出版的。根據Wikipedia的<a href="http://en.wikipedia.org/wiki/Shima_Uta_%28The_Boom_song%29">說明</a>，主唱者去沖繩的時候，參觀了<a href="http://www.himeyuri.or.jp/index.html">姬百合和平祈念資料館</a>，了解這片土地上發生的事情，以及館內倖存者親口說出的故事後，感到非常惆悵。當他離開姬百合和平祈念資料館的時候，映入眼前的是一整片的甘蔗田，讓他動起創作的想法。這就是The boom出版島唄(shima-uta)這首歌的由來。</p>

<p>我不會日文，不過<a href="https://www.ptt.cc/bbs/Sodagreen/M.1331122309.A.EB6.html">ptt</a>有中文歌詞翻譯的歌詞，也有詳細的背景說明。希望人類記取這些慘痛的教訓，不要再放任不負責任的政府亂搞，最後導致悲劇發生。</p>

<h2>參考資料</h2>

<ul>
<li><a href="http://zh.wikipedia.org/zh-tw/%E6%B2%96%E7%B9%A9%E5%B3%B6%E6%88%B0%E5%BD%B9#.E8.87.AA.E6.AE.BA.E5.91.BD.E4.BB.A4.E7.88.AD.E8.AD.B0">Wikipedia: 沖繩島戰役: 自殺命令爭議</a></li>
<li><a href="http://www.himeyuri.or.jp/index.html">姬百合和平祈念資料館</a></li>
<li><a href="https://www.ptt.cc/bbs/Sodagreen/M.1331122309.A.EB6.html">ptt: 蘇打綠版: Re: 一個小事情(關於島唄)</a></li>
<li><a href="http://en.wikipedia.org/wiki/Shima_Uta_%28The_Boom_song%29">Wikipedia: Shima Uta (The boom)</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/26/ubuntu-virtualbox-access-1404-following-usb/">Ubuntu 14.04 下面的VirtualBox存取USB設備</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-26T00:36:00+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>12:36 am</span></time>
        
           | <a href="/blog/2015/02/26/ubuntu-virtualbox-access-1404-following-usb/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/02/26/ubuntu-virtualbox-access-1404-following-usb/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>照慣例，列一下測試環境</p>

<ul>
<li>Host OS</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lsb_release -a
</span><span class='line'>No LSB modules are available.
</span><span class='line'>Distributor ID:   Ubuntu
</span><span class='line'>Description:  Ubuntu 14.04.2 LTS
</span><span class='line'>Release:  14.04
</span><span class='line'>Codename: trusty</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Guest OS
同上。</p></li>
<li><p>VirtualBox 版本: Oracle VM VirtualBox Manager 4.3.22</p></li>
</ul>


<hr />

<p>主要有兩件事要做，就是</p>

<ul>
<li><a href="#vbgrp">將使用者加入Virtual Box 群組</a></li>
<li><a href="#vbext">安裝延伸套件（Optional）</a></li>
</ul>


<hr />

<p><a name="vbgrp"></a></p>

<h2>將使用者加入Virtual Box 群組</h2>

<p>把使用者加入<code>vboxusers</code>群組</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo usermod -a -G vboxusers $USER</span></code></pre></td></tr></table></div></figure>


<p>Double check是否已經在<code>vboxusers</code> group 指令</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ groups $USER</span></code></pre></td></tr></table></div></figure>


<hr />

<p><a name="vbext"></a></p>

<h2>安裝延伸套件（Optional）</h2>

<ul>
<li><p>去<a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox官方網站</a>下載Oracle VM VirtualBox Extension Pack。</p></li>
<li><p>安裝</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo virtualbox Oracle_VM_VirtualBox_Extension_Pack-4.3.22-98236.vbox-extpack</span></code></pre></td></tr></table></div></figure>


<ul>
<li>從主選單中要使用USB VM的Settings->USB選單中，勾選<code>Enable USB 2.0 (EHCI) Controller</code>，請確認VM是Powered off狀態。</li>
<li>驗證:

<ul>
<li>Start VM</li>
<li>VM視窗中選Devices -> USB -> 挑你想要使用的USB</li>
<li>Guest OS開完機，Linux的話用可以使用lsusb驗證</li>
</ul>
</li>
</ul>


<hr />

<h2>參考資料</h2>

<ul>
<li><a href="http://askubuntu.com/questions/377778/how-to-add-users-to-vboxusers">How to add users to vboxusers</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/20/system-class-library-debug-over-there/">系統函式庫的debug 資訊放在那邊？</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-20T17:17:00+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:17 pm</span></time>
        
           | <a href="/blog/2015/02/20/system-class-library-debug-over-there/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/02/20/system-class-library-debug-over-there/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在查詢hello world中的<code>_start</code>呼叫<code>__libc_start_main</code>部份，使用到了反組譯工具。觀察反組譯的部份發現有可能需要看一下libc本身的<code>__libc_start_main</code>組合語言的行為。以前的經驗，這種情況先拉有debug 資訊的套件來看，所以拉了libc6-dbg下來，結果下來的結果，<font color="red">完全無法反組譯</font>。後來請教網友<a href="http://scottt.tw/">Scott Tasi</a>才發現我錯很大。</p>

<p>先講結論：</p>

<ul>
<li>libc的debug 資訊和本身的binary完全隔開。所以反組譯要看的仍然是在原本的libc.so這個檔案。</li>
</ul>


<p>年紀大了才發現能夠從結論中問問題收穫會更多，所以我就來問</p>

<ul>
<li>問題一：誰來用這些debug 資訊?</li>
<li>問題二：既然debug 資訊不在binary內？那麼怎麼找到額外的debug 資訊?</li>
</ul>


<p>先來回答誰來用這些debug 資訊？其實這個根本就是廢話，gdb用心酸的啊。其實這只是在鋪梗，這表示找第二個問題的答案就會和gdb有很大的關係，也就是說我們可以把問題縮小到和gdb相關 <a href="#rk1">（註一）</a>。</p>

<p>好，我們來重複問題二</p>

<ul>
<li>既然debug 資訊不在binary內？那麼怎麼找到額外的debug 資訊?</li>
</ul>


<p>從常理來猜測，顯然是原本的binary有地方告訴gdb「有額外的除錯檔案，請你載入的時候去那邊抓除錯資訊」。我們直接看<a href="https://sourceware.org/gdb/onlinedocs/gdb/Separate-Debug-Files.html">GDB手冊</a>怎麼說</p>

<ul>
<li>gdb允許把debug 資訊放在binary外面，而gdb可以透過兩種方式取得

<ul>
<li>執行的binary內提供link讓gdb可以摸到有debug 資訊的檔案。如果是執行檔，可能就稱為<code>執行檔.debug</code>。

<ul>
<li>這個link資料，放兩個東西

<ul>
<li>不包含directory的檔案名稱</li>
<li>該檔案名稱算出的CRC 碼</li>
</ul>
</li>
</ul>
</li>
<li>透過build ID，因為和我找的無關，跳過。我們focus在第一個方式。</li>
</ul>
</li>
</ul>


<p>有了debug link資訊後，仍然有幾個細節需要釐清</p>

<ul>
<li>問題三：debug 資訊檔案放在哪個目錄？</li>
<li>問題四：debug link放在binary 的哪裡？</li>
</ul>


<p>一樣來看手冊。手冊上說debug 資訊檔案會依以下的順序搜尋</p>

<ul>
<li>該執行檔的存放目錄</li>
<li>該執行檔的存放目錄下面同樣目錄名稱，但是加上.debug。如/usr/bin -> /usr/bin.debug/</li>
<li>系統預設的debug 目錄</li>
</ul>


<p>以上是問題三的的解答，剩下問題四我就認為可以把整個故事說完。所以來看問題四吧。</p>

<ul>
<li>問題四：debug link放在binary 的哪裡？</li>
</ul>


<p>同樣的在手冊中有提到，binary 中有特別的section稱為<code>.gnu_debuglink</code>，就是存放debug 資訊檔案的資訊。存放的資訊為</p>

<ul>
<li>存放debug 資訊的檔案名稱</li>
<li>padding for 4-byte alignment</li>
<li>4 byte CRC checksum</li>
</ul>


<p>好啦，有了完整的故事，當然要看是不是在唬爛。我們來看libc.so吧</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ pwd
</span><span class='line'>/lib/arm-linux-gnueabi
</span><span class='line'>$ objdump -h libc-2.19.so | grep debug
</span><span class='line'> 68 .gnu_debuglink 00000014  00000000  00000000  001336a0  2**0
</span><span class='line'>$ objdump -s -j .gnu_debuglink libc-2.19.so 
</span><span class='line'>
</span><span class='line'>libc-2.19.so:     file format elf32-littlearm
</span><span class='line'>
</span><span class='line'>Contents of section .gnu_debuglink:
</span><span class='line'> 0000 6c696263 2d322e31 392e736f 00000000  libc-2.19.so....
</span><span class='line'> 0010 1b8f248c                             ..$. 
</span><span class='line'> 
</span><span class='line'>$ sudo apt-get install libc6-dbg
</span><span class='line'>Reading package lists... Done
</span><span class='line'>Building dependency tree       
</span><span class='line'>Reading state information... Done
</span><span class='line'>The following NEW packages will be installed:
</span><span class='line'>  libc6-dbg
</span><span class='line'>0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
</span><span class='line'>Need to get 3,290 kB of archives.
</span><span class='line'>After this operation, 18.1 MB of additional disk space will be used.
</span><span class='line'>Get:1 http://不告訴你/debian/ jessie/main libc6-dbg armel 2.19-13 [3,290 kB]
</span><span class='line'>Fetched 3,290 kB in 4s (701 kB/s)      
</span><span class='line'>Selecting previously unselected package libc6-dbg:armel.
</span><span class='line'>(Reading database ... 46987 files and directories currently installed.)
</span><span class='line'>Preparing to unpack .../libc6-dbg_2.19-13_armel.deb ...
</span><span class='line'>Unpacking libc6-dbg:armel (2.19-13) ...
</span><span class='line'>Setting up libc6-dbg:armel (2.19-13) ...
</span><span class='line'>$ find /usr/lib/debug/ |grep libc-2
</span><span class='line'>/usr/lib/debug/lib/arm-linux-gnueabi/libc-2.19.so</span></code></pre></td></tr></table></div></figure>


<p>那麼這個和我原本要反組譯libc的結果有什麼關係？嘛，旅行的精華就是在迷路不是嗎？</p>

<hr />

<h2>測試環境</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lsb_release -a
</span><span class='line'>No LSB modules are available.
</span><span class='line'>Distributor ID:   Debian
</span><span class='line'>Description:  Debian GNU/Linux 8.0 (jessie)
</span><span class='line'>Release:  8.0
</span><span class='line'>Codename: jessie
</span><span class='line'>
</span><span class='line'>$ uname -a
</span><span class='line'>Linux debian 3.2.0-4-versatile #1 Debian 3.2.65-1+deb7u1 armv5tejl GNU/Linux
</span><span class='line'>
</span><span class='line'>$ gcc -dumpmachine
</span><span class='line'>arm-linux-gnueabi</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>參考資料</h2>

<ul>
<li><a href="https://sourceware.org/gdb/onlinedocs/gdb/Separate-Debug-Files.html">GDB Manuel: Debugging Information in Separate Files</a></li>
<li><a href="http://fcamel-life.blogspot.tw/2012/01/gdb-debug-symbol.html">fcamel: gdb 如何找到 debug symbol</a></li>
<li><a href="https://blogs.oracle.com/dbx/entry/gnu_debuglink_or_debugging_system">.gnu_debuglink or Debugging system libraries with source code</a></li>
</ul>


<hr />

<h2>註解</h2>

<p><a name="rk1"></a>
一：精確來說，這應該不是只有gdb才能用，我不過偷懶而已。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/20/several-gcc-parameter-notes/">Gcc的幾個參數筆記</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-20T14:34:00+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:34 pm</span></time>
        
           | <a href="/blog/2015/02/20/several-gcc-parameter-notes/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/02/20/several-gcc-parameter-notes/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>整理一下，反正一定會忘記，就放在這邊，也許以後會再新增</p>

<ul>
<li>gcc &ndash;save-temp hello.c

<ul>
<li>gcc中間產生的檔案通通存起來</li>
</ul>
</li>
<li>gcc -dumpspecs

<ul>
<li>印spec，<font color="red">不過我完全看不懂</font></li>
</ul>
</li>
<li>gcc -dumpmachine

<ul>
<li>印出平台</li>
</ul>
</li>
</ul>


<p>其他關於巨集部份請參考<a href="http://wen00072.github.io/blog/2013/10/13/talk-about-c-macros">這邊</a>和<a href="http://wen00072.github.io/blog/2014/03/06/makefile-header-file-dependency-issues">這邊</a>，很臭很長，抱歉。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/19/ssh-to-login-to-the-remote-host-automatically-sets-the-x-display-variable/">ssh登入遠端主機自動設定X Display 變數</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-19T15:09:00+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>3:09 pm</span></time>
        
           | <a href="/blog/2015/02/19/ssh-to-login-to-the-remote-host-automatically-sets-the-x-display-variable/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/02/19/ssh-to-login-to-the-remote-host-automatically-sets-the-x-display-variable/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>前言</h2>

<hr />

<p>因為用X用習慣了，常常會連線到另外遠端電腦，然後透過X把該台電腦軟體畫面輸出到本機。這時候的標準流程會是</p>

<ul>
<li>ssh登入到遠端</li>
<li>export DISPLAY=你的本機IP:0.0</li>
</ul>


<p>每次都要打這些，還要查自己本機IP很煩。所以整理了兩光的script提供以後剪下貼上。</p>

<p>另外有人會問為什麼不直接用<code>ssh -X</code>連過去？原因是因為我習慣設完display後，開一個遠端終端機丟在背景然後登出目前的ssh session，這樣的操作在<code>ssh -X</code>下從來沒有成功過。我了遠端終端機後就算放在背景，一樣目前終端機會卡住。如果暴力把目前終端機關掉，那麼所有X的session都GG。實在懶得找原因，反正這是個workaround的世界（煙）。</p>

<h2>背景說明</h2>

<hr />

<p>上面操作中，本機需要設定</p>

<ul>
<li>X allow TCP</li>
<li>xhost 加入允許連進來的IP</li>
</ul>


<p>這兩個部份請自行估狗。</p>

<p>另外本機和遠端主機用相同的Distribution資訊如下，測試端的遠端主機是一台沒有GUI的Ubuntu server。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lsb_release -a
</span><span class='line'>No LSB modules are available.
</span><span class='line'>Distributor ID:   Ubuntu
</span><span class='line'>Description:  Ubuntu 14.04.2 LTS
</span><span class='line'>Release:  14.04
</span><span class='line'>Codename: trusty</span></code></pre></td></tr></table></div></figure>


<h2>使用方式</h2>

<hr />

<p>把下面的描述放在<code>~/.profile</code>最後面，下次ssh登入後就可以直接開啟X應用程式把畫面丟回本機了。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Let&#39;s export DISPLAY if we are from ssh remote</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$TERM&quot;</span> <span class="o">=</span> <span class="s2">&quot;xterm&quot;</span> -a -n <span class="s2">&quot;$SSH_CLIENT&quot;</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="nv">REMOTE_IP</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$SSH_CLIENT</span> <span class="p">|</span> cut -f <span class="m">1</span> -d <span class="s2">&quot; &quot;</span><span class="k">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;$REMOTE_IP&quot;</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span><span class='line'>        <span class="nb">exit </span>0
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>    <span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$REMOTE_IP</span>:0.0
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/7">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/5">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/12/06/update-octopress-environment-for-ubuntu-18-dot-04/">更新Ubuntu 18.04後Octopress 環境變動</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/08/26/vim-posix-group-regex/">Vim POSIX Group Regex 使用方式</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/07/24/notes-on-how-to-c-2016/">Notes on How to C 2016</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/02/15/vim-setup-for-trace-c-code/">給自己剪貼用的vim設定</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/06/04/qemu-x86-64-with-gdb/">Fix: Qemu X86_64下gdb Debug kernel出現Remote &#39;g&#8217; Packet Reply Is Too Long:</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Top Categories</h1>
    <ul id="top-category-list"><li><a href='/blog/categories/linux'>linux (41)</a></li><li><a href='/blog/categories/c'>c (32)</a></li><li><a href='/blog/categories/debian'>debian (16)</a></li><li><a href='/blog/categories/presentation'>presentation (14)</a></li><li><a href='/blog/categories/binutils'>binutils (14)</a></li><li><a href='/blog/categories/arm'>arm (12)</a></li><li><a href='/blog/categories/octopress'>octopress (9)</a></li><li><a href='/blog/categories/gan-xiang'>感想 (8)</a></li><li><a href='/blog/categories/make'>make (6)</a></li><li><a href='/blog/categories/stm32'>stm32 (5)</a></li></ul>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/arm'>arm (12)</a></li><li><a href='/blog/categories/asm'>asm (1)</a></li><li><a href='/blog/categories/assembler'>assembler (2)</a></li><li><a href='/blog/categories/assembly'>assembly (3)</a></li><li><a href='/blog/categories/autotools'>autotools (4)</a></li><li><a href='/blog/categories/banana-pi'>banana pi (1)</a></li><li><a href='/blog/categories/bash'>bash (1)</a></li><li><a href='/blog/categories/binutils'>binutils (14)</a></li><li><a href='/blog/categories/buildroot'>buildroot (2)</a></li><li><a href='/blog/categories/c'>c (32)</a></li><li><a href='/blog/categories/c-preprocessor'>c preprocessor (1)</a></li><li><a href='/blog/categories/c99'>c99 (2)</a></li><li><a href='/blog/categories/cmake'>cmake (2)</a></li><li><a href='/blog/categories/cscope'>cscope (1)</a></li><li><a href='/blog/categories/ctags'>ctags (1)</a></li><li><a href='/blog/categories/dbdoclet'>dbdoclet (1)</a></li><li><a href='/blog/categories/debian'>debian (16)</a></li><li><a href='/blog/categories/debootstrap'>debootstrap (1)</a></li><li><a href='/blog/categories/doxygen'>doxygen (1)</a></li><li><a href='/blog/categories/f9'>f9 (1)</a></li><li><a href='/blog/categories/free-software'>free software (1)</a></li><li><a href='/blog/categories/freertos'>freertos (1)</a></li><li><a href='/blog/categories/fsf'>fsf (1)</a></li><li><a href='/blog/categories/gcc'>gcc (2)</a></li><li><a href='/blog/categories/gdb'>gdb (3)</a></li><li><a href='/blog/categories/getopt'>getopt (1)</a></li><li><a href='/blog/categories/gettext'>gettext (2)</a></li><li><a href='/blog/categories/git'>git (4)</a></li><li><a href='/blog/categories/git-remote'>git remote (2)</a></li><li><a href='/blog/categories/github-flavored-markdown'>github flavored markdown (1)</a></li><li><a href='/blog/categories/github-pages'>github pages (1)</a></li><li><a href='/blog/categories/gnu'>gnu (2)</a></li><li><a href='/blog/categories/gnu-as'>gnu as (1)</a></li><li><a href='/blog/categories/gpl'>gpl (1)</a></li><li><a href='/blog/categories/gstreamer'>gstreamer (1)</a></li><li><a href='/blog/categories/hole'>hole (1)</a></li><li><a href='/blog/categories/inline'>inline (1)</a></li><li><a href='/blog/categories/javadoc'>javadoc (2)</a></li><li><a href='/blog/categories/kernel'>kernel (1)</a></li><li><a href='/blog/categories/ld'>ld (1)</a></li><li><a href='/blog/categories/libtool'>libtool (2)</a></li><li><a href='/blog/categories/linker'>linker (1)</a></li><li><a href='/blog/categories/linker-script'>linker script (5)</a></li><li><a href='/blog/categories/linux'>linux (41)</a></li><li><a href='/blog/categories/linux-kernel'>linux kernel (3)</a></li><li><a href='/blog/categories/linux-utilities'>linux utilities (2)</a></li><li><a href='/blog/categories/live-cd'>live cd (1)</a></li><li><a href='/blog/categories/lseek'>lseek (1)</a></li><li><a href='/blog/categories/macro'>macro (1)</a></li><li><a href='/blog/categories/make'>make (6)</a></li><li><a href='/blog/categories/markdown'>markdown (2)</a></li><li><a href='/blog/categories/octopress'>octopress (9)</a></li><li><a href='/blog/categories/osm'>osm (1)</a></li><li><a href='/blog/categories/patch'>patch (1)</a></li><li><a href='/blog/categories/pbuilder'>pbuilder (2)</a></li><li><a href='/blog/categories/pomodoro-technique'>pomodoro technique (1)</a></li><li><a href='/blog/categories/presentation'>presentation (14)</a></li><li><a href='/blog/categories/python'>python (4)</a></li><li><a href='/blog/categories/qemu'>qemu (5)</a></li><li><a href='/blog/categories/quilt'>quilt (1)</a></li><li><a href='/blog/categories/regex'>regex (2)</a></li><li><a href='/blog/categories/rtenv'>rtenv (1)</a></li><li><a href='/blog/categories/rtos'>rtos (1)</a></li><li><a href='/blog/categories/semihosting'>semihosting (1)</a></li><li><a href='/blog/categories/shell-script'>shell script (4)</a></li><li><a href='/blog/categories/software-development'>software development (1)</a></li><li><a href='/blog/categories/stm32'>stm32 (5)</a></li><li><a href='/blog/categories/strip'>strip (1)</a></li><li><a href='/blog/categories/ubuntu'>ubuntu (1)</a></li><li><a href='/blog/categories/upnp'>upnp (1)</a></li><li><a href='/blog/categories/usb'>usb (1)</a></li><li><a href='/blog/categories/valgrind'>valgrind (2)</a></li><li><a href='/blog/categories/vim'>vim (5)</a></li><li><a href='/blog/categories/vim-plugin'>vim plugin (1)</a></li><li><a href='/blog/categories/virtualbox'>virtualbox (2)</a></li><li><a href='/blog/categories/vundle'>vundle (1)</a></li><li><a href='/blog/categories/wireless'>wireless (1)</a></li><li><a href='/blog/categories/wpa-supplicant'>wpa_supplicant (1)</a></li><li><a href='/blog/categories/tai-wan-xiao-chi'>台灣小吃 (1)</a></li><li><a href='/blog/categories/gan-xiang'>感想 (8)</a></li><li><a href='/blog/categories/kuang-rou'>爌肉 (1)</a></li><li><a href='/blog/categories/bi-ji'>筆記 (2)</a></li><li><a href='/blog/categories/zu-zhuang'>組裝 (3)</a></li><li><a href='/blog/categories/lao-jian-zhu'>老建築 (3)</a></li><li><a href='/blog/categories/guo-qi'>過期 (3)</a></li></ul>
</section>
<section>
  <h1>Category Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/arm' style='font-size: 117.5609756097561%'>arm(12)</a> <a href='/blog/categories/asm' style='font-size: 101.46341463414635%'>asm(1)</a> <a href='/blog/categories/assembler' style='font-size: 102.92682926829268%'>assembler(2)</a> <a href='/blog/categories/assembly' style='font-size: 104.39024390243902%'>assembly(3)</a> <a href='/blog/categories/autotools' style='font-size: 105.85365853658537%'>autotools(4)</a> <a href='/blog/categories/banana-pi' style='font-size: 101.46341463414635%'>banana pi(1)</a> <a href='/blog/categories/bash' style='font-size: 101.46341463414635%'>bash(1)</a> <a href='/blog/categories/binutils' style='font-size: 120.48780487804878%'>binutils(14)</a> <a href='/blog/categories/buildroot' style='font-size: 102.92682926829268%'>buildroot(2)</a> <a href='/blog/categories/c' style='font-size: 146.8292682926829%'>c(32)</a> <a href='/blog/categories/c-preprocessor' style='font-size: 101.46341463414635%'>c preprocessor(1)</a> <a href='/blog/categories/c99' style='font-size: 102.92682926829268%'>c99(2)</a> <a href='/blog/categories/cmake' style='font-size: 102.92682926829268%'>cmake(2)</a> <a href='/blog/categories/cscope' style='font-size: 101.46341463414635%'>cscope(1)</a> <a href='/blog/categories/ctags' style='font-size: 101.46341463414635%'>ctags(1)</a> <a href='/blog/categories/dbdoclet' style='font-size: 101.46341463414635%'>dbdoclet(1)</a> <a href='/blog/categories/debian' style='font-size: 123.41463414634146%'>debian(16)</a> <a href='/blog/categories/debootstrap' style='font-size: 101.46341463414635%'>debootstrap(1)</a> <a href='/blog/categories/doxygen' style='font-size: 101.46341463414635%'>doxygen(1)</a> <a href='/blog/categories/f9' style='font-size: 101.46341463414635%'>f9(1)</a> <a href='/blog/categories/free-software' style='font-size: 101.46341463414635%'>free software(1)</a> <a href='/blog/categories/freertos' style='font-size: 101.46341463414635%'>freertos(1)</a> <a href='/blog/categories/fsf' style='font-size: 101.46341463414635%'>fsf(1)</a> <a href='/blog/categories/gcc' style='font-size: 102.92682926829268%'>gcc(2)</a> <a href='/blog/categories/gdb' style='font-size: 104.39024390243902%'>gdb(3)</a> <a href='/blog/categories/getopt' style='font-size: 101.46341463414635%'>getopt(1)</a> <a href='/blog/categories/gettext' style='font-size: 102.92682926829268%'>gettext(2)</a> <a href='/blog/categories/git' style='font-size: 105.85365853658537%'>git(4)</a> <a href='/blog/categories/git-remote' style='font-size: 102.92682926829268%'>git remote(2)</a> <a href='/blog/categories/github-flavored-markdown' style='font-size: 101.46341463414635%'>github flavored markdown(1)</a> <a href='/blog/categories/github-pages' style='font-size: 101.46341463414635%'>github pages(1)</a> <a href='/blog/categories/gnu' style='font-size: 102.92682926829268%'>gnu(2)</a> <a href='/blog/categories/gnu-as' style='font-size: 101.46341463414635%'>gnu as(1)</a> <a href='/blog/categories/gpl' style='font-size: 101.46341463414635%'>gpl(1)</a> <a href='/blog/categories/gstreamer' style='font-size: 101.46341463414635%'>gstreamer(1)</a> <a href='/blog/categories/hole' style='font-size: 101.46341463414635%'>hole(1)</a> <a href='/blog/categories/inline' style='font-size: 101.46341463414635%'>inline(1)</a> <a href='/blog/categories/javadoc' style='font-size: 102.92682926829268%'>javadoc(2)</a> <a href='/blog/categories/kernel' style='font-size: 101.46341463414635%'>kernel(1)</a> <a href='/blog/categories/ld' style='font-size: 101.46341463414635%'>ld(1)</a> <a href='/blog/categories/libtool' style='font-size: 102.92682926829268%'>libtool(2)</a> <a href='/blog/categories/linker' style='font-size: 101.46341463414635%'>linker(1)</a> <a href='/blog/categories/linker-script' style='font-size: 107.3170731707317%'>linker script(5)</a> <a href='/blog/categories/linux' style='font-size: 160.0%'>linux(41)</a> <a href='/blog/categories/linux-kernel' style='font-size: 104.39024390243902%'>linux kernel(3)</a> <a href='/blog/categories/linux-utilities' style='font-size: 102.92682926829268%'>linux utilities(2)</a> <a href='/blog/categories/live-cd' style='font-size: 101.46341463414635%'>live cd(1)</a> <a href='/blog/categories/lseek' style='font-size: 101.46341463414635%'>lseek(1)</a> <a href='/blog/categories/macro' style='font-size: 101.46341463414635%'>macro(1)</a> <a href='/blog/categories/make' style='font-size: 108.78048780487805%'>make(6)</a> <a href='/blog/categories/markdown' style='font-size: 102.92682926829268%'>markdown(2)</a> <a href='/blog/categories/octopress' style='font-size: 113.17073170731707%'>octopress(9)</a> <a href='/blog/categories/osm' style='font-size: 101.46341463414635%'>osm(1)</a> <a href='/blog/categories/patch' style='font-size: 101.46341463414635%'>patch(1)</a> <a href='/blog/categories/pbuilder' style='font-size: 102.92682926829268%'>pbuilder(2)</a> <a href='/blog/categories/pomodoro-technique' style='font-size: 101.46341463414635%'>pomodoro technique(1)</a> <a href='/blog/categories/presentation' style='font-size: 120.48780487804878%'>presentation(14)</a> <a href='/blog/categories/python' style='font-size: 105.85365853658537%'>python(4)</a> <a href='/blog/categories/qemu' style='font-size: 107.3170731707317%'>qemu(5)</a> <a href='/blog/categories/quilt' style='font-size: 101.46341463414635%'>quilt(1)</a> <a href='/blog/categories/regex' style='font-size: 102.92682926829268%'>regex(2)</a> <a href='/blog/categories/rtenv' style='font-size: 101.46341463414635%'>rtenv(1)</a> <a href='/blog/categories/rtos' style='font-size: 101.46341463414635%'>rtos(1)</a> <a href='/blog/categories/semihosting' style='font-size: 101.46341463414635%'>semihosting(1)</a> <a href='/blog/categories/shell-script' style='font-size: 105.85365853658537%'>shell script(4)</a> <a href='/blog/categories/software-development' style='font-size: 101.46341463414635%'>software development(1)</a> <a href='/blog/categories/stm32' style='font-size: 107.3170731707317%'>stm32(5)</a> <a href='/blog/categories/strip' style='font-size: 101.46341463414635%'>strip(1)</a> <a href='/blog/categories/ubuntu' style='font-size: 101.46341463414635%'>ubuntu(1)</a> <a href='/blog/categories/upnp' style='font-size: 101.46341463414635%'>upnp(1)</a> <a href='/blog/categories/usb' style='font-size: 101.46341463414635%'>usb(1)</a> <a href='/blog/categories/valgrind' style='font-size: 102.92682926829268%'>valgrind(2)</a> <a href='/blog/categories/vim' style='font-size: 107.3170731707317%'>vim(5)</a> <a href='/blog/categories/vim-plugin' style='font-size: 101.46341463414635%'>vim plugin(1)</a> <a href='/blog/categories/virtualbox' style='font-size: 102.92682926829268%'>virtualbox(2)</a> <a href='/blog/categories/vundle' style='font-size: 101.46341463414635%'>vundle(1)</a> <a href='/blog/categories/wireless' style='font-size: 101.46341463414635%'>wireless(1)</a> <a href='/blog/categories/wpa-supplicant' style='font-size: 101.46341463414635%'>wpa_supplicant(1)</a> <a href='/blog/categories/tai-wan-xiao-chi' style='font-size: 101.46341463414635%'>台灣小吃(1)</a> <a href='/blog/categories/gan-xiang' style='font-size: 111.70731707317073%'>感想(8)</a> <a href='/blog/categories/kuang-rou' style='font-size: 101.46341463414635%'>爌肉(1)</a> <a href='/blog/categories/bi-ji' style='font-size: 102.92682926829268%'>筆記(2)</a> <a href='/blog/categories/zu-zhuang' style='font-size: 104.39024390243902%'>組裝(3)</a> <a href='/blog/categories/lao-jian-zhu' style='font-size: 104.39024390243902%'>老建築(3)</a> <a href='/blog/categories/guo-qi' style='font-size: 104.39024390243902%'>過期(3)</a> </span>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.<br>
  Copyright &copy; 2018 - Wen Liao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'httpwen00072githubio';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
