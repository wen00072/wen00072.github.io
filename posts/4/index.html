
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>My code works, I don&#8217;t know why.</title>
  <meta name="author" content="Wen Liao">
  <meta property="og:image" content="https://wen00072.github.io/files/pb.jpg" />


  
  <meta name="description" content="以下為課程筆記，我沒有專業能力判斷是否有誤解，請自行斟酌。 早期職業主要分為士農工商。而 士農住三合院或四合院
工商住在市區內，主要是街屋 本次活動主要討論街屋，三合院、四合院不在討論範圍。
早期街屋考量風水，會在街道前後左右出入口安排在廟宇、山川、牆等位置，希望氣不要漏掉。
台灣靠海風大、 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wen00072.github.io/posts/4/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My code works, I don't know why." type="application/atom+xml">
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My code works, I don&#8217;t know why.</a></h1>
  
    <h2>國王的耳朵是驢耳朵</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="wen00072.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/categories">Categories</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/14/tai-wan-lao-jie-te-se-pian/">空間母語 - 台灣老街特色篇</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-11-14T21:32:02+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:32 pm</span></time>
        
           | <a href="/blog/2015/11/14/tai-wan-lao-jie-te-se-pian/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/11/14/tai-wan-lao-jie-te-se-pian/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>以下為課程筆記，我沒有專業能力判斷是否有誤解，請自行斟酌。</p>

<ul>
<li>早期職業主要分為士農工商。而

<ul>
<li>士農住三合院或四合院</li>
<li>工商住在市區內，主要是街屋</li>
</ul>
</li>
<li>本次活動主要討論街屋，三合院、四合院不在討論範圍。</li>
<li>早期街屋考量風水，會在街道前後左右出入口安排在廟宇、山川、牆等位置，希望氣不要漏掉。</li>
<li>台灣靠海風大、北部雨多，在這些地區會看到<a href="https://zh.wikipedia.org/zh-tw/%E4%B8%8D%E8%A6%8B%E5%A4%A9%E8%A1%97">不見天街</a>。</li>
<li>街道的兩側的立面就像是臉一樣，各種的裝飾就像面具一樣，發揮自己的個性。</li>
<li>樓井的樓梯入口一般來說不會面對入口方向，原因是風水考量不希望氣跑掉。</li>
<li>過水：兩進(兩落)之間的空間，一般廚房、水井安排在這邊。</li>
<li>陳旺來、陳三川(郭三川)：日治時期的土水師傅，曾經參與大溪老街、迪化街老街街屋、葉金塗宅立面工程。</li>
<li>街屋中，單拱的難度比較高，沒有處理好會出現裂縫。</li>
<li>圓形磚造柱子會使用弧線磚，該磚頭是大正年間才有產出。</li>
<li>弧線立面是巴洛克建築元素之一。</li>
<li>立面工法之一：使用以焦炭為主的材料，捏成丸狀，往特定區域砸，造出凹凸不平的效果。此工法可以去斗六看。</li>
<li>立面工法之二：將黏性物質糊在平面上，再覆蓋上紙。等待一段時間後用力撕開紙張，造出凹凸不平的效果。</li>
<li><a href="http://vr.theatre.ntu.edu.tw/fineart/architect-wt/palladio/palladio.htm">Palladio建築</a></li>
<li>台灣工匠受日本影響

<ul>
<li>刨刀和中國不同，沒有兩邊的握柄。另外操作刨刀方向是朝身體內側刨，而不是朝身體外側刨。</li>
<li>鋸子兩邊都有齒，一邊是粗的，用來鋸和木頭紋理同方向；而細的齒則是用來橫鋸木頭紋理方向。傳統的情況，是會有兩個鋸子，一個是粗的，另外一個是細的。</li>
</ul>
</li>
</ul>


<h2>參考資料</h2>

<ul>
<li><a href="https://www.facebook.com/kjmu.foundation/photos/a.438258032864411.95777.433151266708421/961818460508363/?type=3&amp;theater">活動資訊</a></li>
<li><a href="http://twinhall.org/">新埔鎮雙堂屋</a></li>
<li><a href="http://nrch.culture.tw/twpedia.aspx?id=9055">台灣大百科全書：陳旺來</a></li>
<li><a href="https://zh.wikipedia.org/zh-tw/%E5%A4%A7%E6%BA%AA%E8%80%81%E8%A1%97">Wikipedia: 大溪老街</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/10/lu-gang-cai-kuang-rou/">鹿港蔡爌肉</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-11-10T22:40:57+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:40 pm</span></time>
        
           | <a href="/blog/2015/11/10/lu-gang-cai-kuang-rou/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/11/10/lu-gang-cai-kuang-rou/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/files/lukang/P1160656.JPG" title="招牌"></p>

<p>因為對於爌肉的好奇心，徵得在鹿港蔡爌肉的小岳的同意後寫出這篇訪問。小岳的攤位位置在果菜市場，從入口進入後靠文聖街方向第二間攤位。</p>

<p><img src="/files/lukang/P1160405.JPG">
<img src="/files/lukang/P1160668.JPG">
<img src="/files/lukang/P1160669.JPG"></p>

<p>小岳的長輩原本是做外燴辦桌生意，到了父親這代在鹿港頂番婆這個地方開始了爌肉生意，後來才把攤位搬到鹿港。目前攤位除了有爌肉飯、豬腳外、也有提供各式配菜和肉燥飯等料理。</p>

<p>在「<a href="https://www.facebook.com/ZhangHuaXiaoShiJi/">彰化小食記</a>」這本書有提到正統的彰化爌肉是使用腿庫、三層肉部份只是備料給少數喜歡三層肉的客人。這樣的觀察可以在蔡爌肉的料理中完全驗證。接下來我們來看看爌肉的料理方式吧。</p>

<p>凌晨四點多小岳一家就要起床準備開張，他們就在攤位現場料理，使用了非常先進的開放廚房概念。開張以後就開始料理菜色，大概五點多就可以點菜了。一般來說市場大概早上七點前會比較忙碌，如果估計第二天備料不足的時候，就要在早上七點多和肉商拿肉。主要是腿庫（豬大腿）、三層、還有腹部等部位的連皮肥肉。接下來把這些肉帶回後，要做料理前的處理。</p>

<p>首先第一步要川燙：
<img src="/files/lukang/P1160655.JPG" title="川燙生肉"></p>

<p>川燙的時候要隨時小心不要被濺起來的滾水燙到。</p>

<p><img src="/files/lukang/P1160665.JPG" title="滾燙的熱水"></p>

<p>什麼時候可以起鍋也是全憑經驗。
<img src="/files/lukang/P1160662.JPG" title="起鍋"></p>

<p>起鍋後先浸冷水稍微冷卻一下後放置在另外一個臉盆內。
<img src="/files/lukang/P1160408.JPG" title="冷卻後的豬肉"></p>

<p>冷卻完畢後，就可以進入下一個切塊階段。</p>

<p>切塊主要要處理三個部份</p>

<h2>腿庫</h2>

<ul>
<li><p>將帶皮肥肉和瘦肉使用竹籤固定
<img src="/files/lukang/P1160418.JPG" title="使用竹籤固定帶皮肥肉和瘦肉"></p></li>
<li><p>帶皮肥肉不一定和瘦肉不一定是同一塊部位。照「<a href="https://www.facebook.com/ZhangHuaXiaoShiJi/">彰化小食記</a>」的說法，這樣有一個多的好處，那就是可以隨意調整肥瘦比例
<img src="/files/lukang/P1160416.JPG" title="分開的帶皮肥肉和瘦肉1">
<img src="/files/lukang/P1160415.JPG" title="分開的帶皮肥肉和瘦肉2"></p></li>
</ul>


<p>這邊有幾個特殊的部位可以介紹</p>

<ul>
<li>圈仔（摳ㄚ)

<ul>
<li>腿庫膝關節那端的部位，一隻腿庫只有兩個。
<img src="/files/lukang/P11604081.JPG" title="圈仔部位">
<img src="/files/lukang/P1160410.JPG" title="圈仔1">
<img src="/files/lukang/P1160411.JPG" title="圈仔2"></li>
</ul>
</li>
<li>離緣

<ul>
<li>大腿的某個部位，由肥肉包圍的含脂肪瘦肉部位，一隻腿庫只有一個。
<img src="/files/lukang/P1160414.JPG" title="離緣"></li>
</ul>
</li>
<li>腳筋

<ul>
<li>一隻腿庫只有一個。
<img src="/files/lukang/P1160412.JPG" title="腳筋"></li>
</ul>
</li>
</ul>


<h2>三層</h2>

<p><img src="/files/lukang/P1160421.JPG" title="三層肉">
切成片狀後以竹籤固定。固定部份沒有照片。另外小岳媽媽推荐的部位照片中有標示，腿庫的離緣紋路和這邊標示很類似。</p>

<h2>肉燥原料</h2>

<p>直接看照片就知道了。</p>

<p><img src="/files/lukang/P1160666.JPG">
<img src="/files/lukang/P1160422.JPG">
<img src="/files/lukang/P1160423.JPG"></p>

<h2>成品欣賞時間</h2>

<p>接下來就是隔天凌晨的料理時間了。因為料理如作戰不方便打擾，加上我爬不起來就跳過了。那麼就讓我們來欣賞最後的成品囉。</p>

<ul>
<li><p>爌肉加上肉燥飯
<img src="/files/lukang/P1160401.JPG"></p></li>
<li><p>紅糟肉飯
<img src="/files/lukang/P1160406.JPG"></p></li>
<li><p>腳筋
<img src="/files/lukang/P1160659.JPG"></p></li>
</ul>


<h2>致謝：</h2>

<p>感謝小岳慷慨允許我問東問西並且拍照、親切的小岳媽媽介紹我不同的爌肉部位、以及熱情活潑的小岳妹妹現場示範食材準備。</p>

<h2>地圖</h2>

<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://www.openstreetmap.org/export/embed.html?bbox=120.43901950120926%2C24.04772790157008%2C120.44106870889665%2C24.04907262074934&amp;layer=mapnik&amp;marker=24.048399038221437%2C120.44004410505295" style="border: 1px solid black"></iframe>


<p><br/><small><a href="http://www.openstreetmap.org/?mlat=24.04840&amp;mlon=120.44004#map=19/24.04840/120.44004">查看更大的地圖</a></small></p>

<h2>街景</h2>

<iframe src="https://www.google.com/maps/embed?pb=!1m0!3m2!1sen!2stw!4v1447339986486!6m8!1m7!1s5PniXxMM2gj_2PzE3x1w9A!2m2!1d24.04833167925234!2d120.4400708108823!3f5.490853916829565!4f-12.669155551196823!5f0.7820865974627469" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/05/notes-of-taipei-walking-tour/">台北城市散步 - 老房子的秘密筆記</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-11-05T23:05:37+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:05 pm</span></time>
        
           | <a href="/blog/2015/11/05/notes-of-taipei-walking-tour/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/11/05/notes-of-taipei-walking-tour/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>Nov/25/2015: 收到朱禹潔老師指導信件，補充及修正了部份內容。</li>
</ul>


<p>感謝朱禹潔老師詳細的說明、不厭其煩地回答我的問題、和在整理筆記時提供協助。整理資料如下：</p>

<h2>歷史建物定義、維護的相關法規</h2>

<ul>
<li>亞洲和西方老建物最大的差別是亞洲以木構造為主的亞洲建築物，因木材本身易損壞且須更換，與石造為主的西方建築物差別很大。1994年「奈良真實性文件」就是世界遺產組織修正以石造建築為主的真實性認定方式。</li>
<li>台灣<strong>建築</strong>相關文化資產分類

<ul>
<li>古蹟

<ul>
<li>建築更動彈性差，就算要加入一個釘子需要成立審查委員會</li>
</ul>
</li>
<li>歷史建築</li>
<li>聚落</li>
<li>文化景觀</li>
<li>遺址</li>
</ul>
</li>
<li>其他文化資產還有

<ul>
<li>傳統藝術</li>
<li>民俗及有關文物</li>
<li>古物</li>
<li>自然地景</li>
</ul>
</li>
<li>老建築管理法規有文化資產保存法和都市規劃法這兩個法規</li>
<li>建物修復保存流程

<ul>
<li>反應/申請</li>
<li>成立審議委員會</li>
<li>評估條件

<ul>
<li>代表性</li>
<li>價值</li>
<li>建築物價值</li>
<li>住過的人造就建築物的價值

<ul>
<li>這幾年來逐漸增多，一些名人故居指定為古蹟，或登錄為歷史建築會基於這樣的理由如蔡瑞月舞蹈研究社</li>
</ul>
</li>
</ul>
</li>
<li>指定為古蹟/歷史建築</li>
<li>古蹟修復及再利用規範，整理自古蹟修復及再利用辦法

<ul>
<li>修復或再利用計畫</li>
<li>規劃設計</li>
<li>施工</li>
<li>監造</li>
<li>工作報告書</li>
</ul>
</li>
</ul>
</li>
<li>保存和維護是不同的面相</li>
<li>文化資產修復的建築師事務所及營造廠原本不多，造成寡佔市場。2008年開放許多建築師事務所及營造廠具有修復設計及工程承攬資格，造成修復品質良莠不齊。曾經有廠商因為不知道量測木頭含水量而造成修復後木頭龜裂，最後只好重做。而原本的修復也是難以評估品質</li>
</ul>


<h2>日治時代建築特色</h2>

<ul>
<li>日本使用鋼筋混凝土時間早於米國。1923年關東大地震過後，磚造承重牆的建築被淘汰，鋼筋混凝土逐漸普及。 當初使用的鐵筋，密度和網格與今日不同 ，目前台灣文學館有樣本供人參考比對。。</li>
<li>現在修復日式建築的紅檜是從日本進口，只是那些進口的紅檜也是台灣紅檜出口轉內銷，而且還需要特殊管道才能取得。</li>
<li>日治時代建築分類

<ul>
<li>新藝術、式樣</li>
<li>擬洋風/和洋風</li>
<li>現代(指構造、建材）</li>
<li>純日式</li>
</ul>
</li>
<li>日治時代以台灣作為建築設計的實驗場，所以可以看到不同的嘗試，可行後再拿回日本使用。所以同樣的日本設計師可能在台灣的設計風格和之後在日本的設計風格差異很大。</li>
<li>在日本一般溼度約60%，但是在台灣溼度超過60%比比皆是，甚至可以到90%。造成使用日本傳統工法的建築在台灣容易損毀。因此日治時期針對台灣潮溼的氣候在建築上的改變有

<ul>
<li>抬高地基隔絕溼氣</li>
<li>加寬加深陽台</li>
</ul>
</li>
<li>日式木造建築特點

<ul>
<li>雨淋板</li>
<li>編竹夾泥</li>
<li>鬼瓦/黑瓦</li>
</ul>
</li>
<li>日式木造建築建造順序

<ul>
<li>磚石建立基底</li>
<li>梁柱</li>
<li>屋頂</li>
<li>壁體

<ul>
<li>編竹夾泥</li>
<li>編竹夾泥上灰</li>
<li>雨淋板</li>
</ul>
</li>
</ul>
</li>
<li>鳥居分類三種

<ul>
<li>神明鳥居</li>
<li>明神鳥居</li>
<li>稻禾鳥居</li>
</ul>
</li>
</ul>


<h2>其他</h2>

<ul>
<li>抿石子：山海樓使用的工法</li>
<li>噴蛭石：米國前在台領事館有使用到的施工方式之一</li>
<li>UNESCO：<a href="https://zh.wikipedia.org/zh-tw/%E8%81%94%E5%90%88%E5%9B%BD%E6%95%99%E8%82%B2%E3%80%81%E7%A7%91%E5%AD%A6%E5%8F%8A%E6%96%87%E5%8C%96%E7%BB%84%E7%BB%87">聯合國教育、科學及文化組織</a></li>
<li><a href="https://zh.wikipedia.org/zh-tw/%E4%B8%89%E6%A9%8B%E7%94%BA">三橋町</a>

<ul>
<li>日治時代重要人物如乃木希典總督之母、日本總督明石元二郎和日本人的墓地，約在林森公園、康樂公園附近。戰後為臨時居住地，整頓後目前有保留兩座鳥居置於林森公園內。當初成立公園時有抗爭運動、可惜沒有保留墓地的聲音。</li>
<li>有學員補充臨時居留區以林森北路為界，西邊為戰後新住民加上原住民配偶為主，而東邊為戰前住民北上時的聚落。</li>
<li><a href="https://zh.wikipedia.org/zh-tw/%E6%98%8E%E7%9F%B3%E5%85%83%E4%BA%8C%E9%83%8E">明石元二郎</a>

<ul>
<li>在他任內創立台灣電力株式會社、架設縱貫鐵路、以及建立各地職業學校。</li>
</ul>
</li>
</ul>
</li>
</ul>


<h2>參考資料</h2>

<ul>
<li>朱禹潔老師的補充資料</li>
<li><a href="http://law.moj.gov.tw/LawClass/LawAll.aspx?PCode=H0170001">全國法規資料庫：文化資產保存法</a></li>
<li><a href="http://www.moc.gov.tw/information_309_19988.html">文化部：古蹟修復及再利用辦法</a></li>
<li><a href="http://www.taipei-walkingtour.tw/#!t-tours82/c328">台北城市散步 - 老房子的秘密導覽活動</a></li>
<li><a href="http://alexpankimo.pixnet.net/blog/post/260474513-%E6%8A%BF%E7%9F%B3%E5%AD%90%E5%85%A9%E4%B8%89%E4%BA%8B">抿石子兩三事@ ㄚ潘的家!自建的漫漫長路! :: 痞客邦PIXNET ::</a></li>
<li><a href="https://www.youtube.com/watch?v=tEw1eboHDTA">Youtube: 室內裝修●泥作師傅如何施作抿石子</a></li>
<li><a href="https://zh.wikipedia.org/zh-tw/%E8%9B%AD%E7%9F%B3">Wikipedia： 蛭石</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/20/kai-fang-jie-tu-zi-zhu-lu-xing-de-hao-bang-shou/">開放街圖 自助旅行的好幫手投影片上線</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-20T00:33:25+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>12:33 am</span></time>
        
           | <a href="/blog/2015/09/20/kai-fang-jie-tu-zi-zhu-lu-xing-de-hao-bang-shou/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/09/20/kai-fang-jie-tu-zi-zhu-lu-xing-de-hao-bang-shou/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><iframe src="//www.slideshare.net/slideshow/embed_code/key/4SPxqlHI6W9za3" width="720" height="560" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>


<p> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/zzz00072/ss-52900264" title="開放街圖 自助旅行的好幫手" target="_blank">開放街圖 自助旅行的好幫手</a> </strong> from <strong><a href="//www.slideshare.net/zzz00072" target="_blank">Wen Liao</a></strong> </div></p>

<script async class="speakerdeck-embed" data-id="8d6935b9c3014b949c05effa288d4a7b" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/30/zhu-jie-zhong-shi-yong-javadoc-tag/">註解中使用Javadoc Tag並將其轉成pdf 說明文件</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-30T14:02:01+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:02 pm</span></time>
        
           | <a href="/blog/2015/08/30/zhu-jie-zhong-shi-yong-javadoc-tag/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/08/30/zhu-jie-zhong-shi-yong-javadoc-tag/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>目錄</h2>

<ul>
<li><a href="#jdoc-preface">前言</a></li>
<li><a href="#jdoc-example">測試環境和程式</a></li>
<li><a href="#jdoc-comments">javadoc 專用註解</a>

<ul>
<li><a href="#jdoc-comments-tags">javadoc 專用註解tag節錄</a></li>
<li><a href="#jdoc-comments-ex">套用 javadoc 範例</a></li>
</ul>
</li>
<li><a href="#jdoc-ref">參考資料</a></li>
</ul>


<p><a name="jdoc-preface"></a></p>

<h2>前言</h2>

<p><a href="http://www.oracle.com/technetwork/articles/java/index-jsp-135444.html">javadoc</a> 是一套java程式碼文件產工具。它透過在程式碼註解置入javadoc專用的tag，讓自動產出的文件內容提供更詳細的資訊和美觀的呈現方式。這邊整理資訊如下</p>

<p>在開始加入前，我們可以想一下你要看SDK文件會想看什麼，我自己會想到</p>

<ul>
<li>方塊圖/元件簡介</li>
<li>函數詳細說明如

<ul>
<li>函數名稱</li>
<li>函數功用</li>
<li>函數參數說明</li>
<li>函數回傳值</li>
<li>函數使用注意事項</li>
<li>和函數功能相關的其他函數。比如說看到<code>play</code>你會想看<code>open</code>、<code>pause</code>、<code>stop</code>、<code>seek</code>等。</li>
</ul>
</li>
</ul>


<p>接下來看看我查到的javadoc工具能夠幫我們做到那邊吧？</p>

<p>註：時間和能力有限，有些功能也許沒找到是因為自己沒看到而不代表javadoc辦不到，請讀者自行斟酌。</p>

<p><a name="jdoc-example"></a></p>

<h2>測試環境和程式</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lsb_release -a
</span><span class='line'>No LSB modules are available.
</span><span class='line'>Distributor ID:   Ubuntu
</span><span class='line'>Description:  Ubuntu 14.04.3 LTS
</span><span class='line'>Release:  14.04
</span><span class='line'>Codename: trusty</span></code></pre></td></tr></table></div></figure>


<h3>檔案和目錄結構</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ tree
</span><span class='line'>.
</span><span class='line'>├── com
</span><span class='line'>│   └── test
</span><span class='line'>│       └── test.java
</span><span class='line'>├── config.properties
</span><span class='line'>├── Makefile
</span><span class='line'>└── pdfdoclet-1.0.3
</span><span class='line'>    ├── build.xml
</span><span class='line'>       ....
</span><span class='line'>    └── jar
</span><span class='line'>        └── pdfdoclet-1.0.3-all.jar</span></code></pre></td></tr></table></div></figure>


<h3>Makefile</h3>

<p>就單純編譯一個java檔，以及對應的pdf文件，並使用Ubuntu 上面預設的pdf閱讀程式開啟之。pdf文件使用<a href="http://pdfdoclet.sourceforge.net/">pdfdoclet</a>產生。該套件需自行下載，我將下載的pdfdoclet解壓縮到測試程式同一層目錄中。</p>

<figure class='code'><figcaption><span>Makefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='makefile'><span class='line'><span class="nv">SRC_PATH</span><span class="o">=</span>com/test
</span><span class='line'><span class="nv">TARGET</span><span class="o">=</span><span class="k">$(</span>SRC_PATH<span class="k">)</span>/test
</span><span class='line'><span class="nv">SRC_FILE</span><span class="o">=</span><span class="k">$(</span>addsuffix .java, <span class="k">$(</span>TARGET<span class="k">))</span>
</span><span class='line'>
</span><span class='line'><span class="nf">$(TARGET)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">SRC_FILE</span><span class="k">)</span>
</span><span class='line'>  javac <span class="nv">$^</span>
</span><span class='line'>  javadoc -docletpath pdfdoclet-1.0.3/jar/pdfdoclet-1.0.3-all.jar <span class="se">\</span>
</span><span class='line'>            -doclet com.tarsec.javadoc.pdfdoclet.PDFDoclet <span class="nv">$^</span> -verbose <span class="se">\</span>
</span><span class='line'>            -pdf <span class="nv">$@</span>.pdf -config config.properties
</span><span class='line'>  evince <span class="k">$(</span>TARGET<span class="k">)</span>.pdf
</span><span class='line'>
</span><span class='line'><span class="nf">clean</span><span class="o">:</span>
</span><span class='line'>  rm -rf <span class="k">$(</span>SRC_PATH<span class="k">)</span>/*.class <span class="k">$(</span>TARGET<span class="k">)</span>.pdf
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>pdfdoclet config檔案</h3>

<figure class='code'><figcaption><span>config.properties</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'># Prints @author tags if set to &quot;yes&quot;.
</span><span class='line'>tag.author=yes
</span><span class='line'>
</span><span class='line'># Prints @version tags if set to &quot;yes&quot;.
</span><span class='line'>tag.version=yes
</span><span class='line'>
</span><span class='line'># Prints @since tags if set to &quot;yes&quot;.
</span><span class='line'>tag.since=yes
</span><span class='line'>
</span><span class='line'># Show the Summary Tables if set to &quot;yes&quot;.
</span><span class='line'>summary.table=yes
</span><span class='line'>
</span><span class='line'># Encrypts the document if set to &quot;yes&quot;.
</span><span class='line'>encrypted=yes
</span><span class='line'>
</span><span class='line'># The following property is ignored
</span><span class='line'># if &quot;encrypted&quot; is not set to yes.
</span><span class='line'>allow.printing=yes
</span><span class='line'>
</span><span class='line'># Creates hyperlinks if set to &quot;yes&quot;.
</span><span class='line'># For print documents, use &quot;no&quot;, so
</span><span class='line'># there will be no underscores.
</span><span class='line'>create.links=yes
</span><span class='line'>
</span><span class='line'># Creates an alphabetical index of all
</span><span class='line'># classes and members at the end of the
</span><span class='line'># document if set to &quot;yes&quot;.
</span><span class='line'>create.index=yes
</span><span class='line'>
</span><span class='line'># Creates a navigation frame (or PDF
</span><span class='line'># outline tree) if set to &quot;yes&quot;.
</span><span class='line'>create.frame=yes
</span><span class='line'>
</span><span class='line'># Creates a title page at the beginning
</span><span class='line'># of the document if set to &quot;yes&quot;.
</span><span class='line'>api.title.page=yes
</span><span class='line'>
</span><span class='line'># Defines the title on the title page if
</span><span class='line'># no external HTML page is used.
</span><span class='line'>api.title=Test pdfdoeclet
</span><span class='line'>
</span><span class='line'># Defines the author text on the
</span><span class='line'># title page.
</span><span class='line'>api.author=by Wen Liao
</span></code></pre></td></tr></table></div></figure>


<h3>測試原始碼</h3>

<p>印出九九乘法表，我不會Java，更不會OO。這個程式示範了在class中呼叫另外一個class method。如果有人有發現寫不好的請指正，感恩！</p>

<figure class='code'><figcaption><span>com/test/test.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">test</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">test</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">mul</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">multiply</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="kt">int</span> <span class="n">j</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">MAX_NUM</span> <span class="o">=</span> <span class="mi">9</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">test</span> <span class="n">my_test</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">test</span><span class="o">();</span>
</span><span class='line'>        <span class="n">my_test</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">mul</span> <span class="n">my_mul</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">mul</span><span class="o">();</span>
</span><span class='line'>        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">MAX_NUM</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">MAX_NUM</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="s">&quot; x &quot;</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="s">&quot; = &quot;</span> <span class="o">+</span> <span class="n">my_mul</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">));</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><a name="jdoc-comments"></a></p>

<h2>javadoc 專用註解說明</h2>

<p>還沒加入javadoc註解的pdf檔<a href="/files/javadoc-20150830/test_init.pdf">如link，應該沒病毒吧?</a>。接下來讓我們開始吧。</p>

<p>要引入javadoc的註解，要加入javadoc的註解專用格式如下。</p>

<figure class='code'><figcaption><span>javadoc註解</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm">* 兩個星號開頭的註解，這行的第一個*可以省略</span>
</span><span class='line'><span class="cm">*/</span>
</span></code></pre></td></tr></table></div></figure>


<p>在介紹tag前，從參考資料中整理了一些注意事項</p>

<ol>
<li>一個javadoc 註解可以大概分成兩個部份

<ul>
<li>主要文字描述部份，描述特定的class, interface, method是做什麼，操作時有哪些需要注意的事項。</li>
<li>tag section，除了註解開頭的<code>*</code>外，一行以<code>@</code>開頭的javadoc tag註解。所有的主要文字描述<strong>必須</strong>要放在tag section前面。

<ul>
<li>tag又可以分為

<ul>
<li>block tag，就是上面講的<code>@</code>放在行首的情形</li>
<li>inline tag，以<code>{@java_tag_名稱 參數}</code>表示</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>第一個<code>@</code>符號出現在單行最開頭之前的所有註解，視為該註解往下最接近的method說明。</li>
<li>註解中兩個段落以<code>&lt;p&gt;</code>間隔。</li>
<li>javadoc註解的開頭使用簡潔的語句描述下面實體如class/method等。想像成git commit log第一行對於git log的重要性。</li>
<li>註解中可以插入HTML語法，包括<code>&lt;a href...&gt;</code>、<code>&lt;img src=...&gt;</code>和<code>&lt;pre&gt;...&lt;/pre&gt;</code>。因為這樣，要顯示<code>&lt;</code>，<code>&amp;</code>之類字元的要使用<a href="http://www.w3schools.com/html/html_entities.asp">HTML Entities</a>如<code>&amp;amp</code>。</li>
<li>javadoc註解文件分類

<ul>
<li>doc 文件，在class, interface, method等宣告前的註解，用來解釋該class、interface等。</li>
<li>overview 文件，整個產出文件的簡介說明。</li>
<li>package 文件，單個package的簡介文件。</li>
</ul>
</li>
</ol>


<p>以下是典型的javadoc 註解範例</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm">* 說明你的method</span>
</span><span class='line'><span class="cm">* @param 參數說明，這就是一個javadoc tag，*可有可無。</span>
</span><span class='line'><span class="cm">*/</span>
</span></code></pre></td></tr></table></div></figure>


<p>上列第一項的規範，引起另外兩個問題：</p>

<ul>
<li>一個package的要怎麼說明呢？</li>
<li>更大的狀況，整個套件有多個package要怎麼說明呢？</li>
</ul>


<p>關於上面的情況，參考文件有提到：</p>

<ul>
<li>package的說明有兩種，請二擇一

<ul>
<li>寫在package同目錄中的 <code>package-info.java</code></li>
<li>寫在package同目錄中的 <code>package.html</code>

<ul>
<li>請把javadoc的註解格式放在<code>&lt;body&gt;&lt;/body&gt;</code>之間</li>
</ul>
</li>
</ul>
</li>
<li>整個套件的說明有兩種，需要寫一個html檔案，把你的說明放在裏面。並且在執行<code>javadoc</code>加入<code>-overview 你的套件html檔名</code></li>
</ul>


<p>很複雜嘛？看個範例，更改上面的範例</p>

<ul>
<li>Makefile，新增參數是指定<code>-overview</code>的檔案</li>
</ul>


<figure class='code'><figcaption><span>新增package和overview文件的 Makefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='makefile'><span class='line'><span class="nv">SRC_PATH</span><span class="o">=</span>com/test
</span><span class='line'><span class="nv">TARGET</span><span class="o">=</span><span class="k">$(</span>SRC_PATH<span class="k">)</span>/test
</span><span class='line'><span class="nv">SRC_FILE</span><span class="o">=</span><span class="k">$(</span>addsuffix .java, <span class="k">$(</span>TARGET<span class="k">))</span>
</span><span class='line'><span class="nv">SRC_FILE</span><span class="o">+=</span>package-info.java
</span><span class='line'><span class="nv">OVERVIEW_FILE</span><span class="o">=</span>overview.html
</span><span class='line'>
</span><span class='line'><span class="nf">$(TARGET)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">SRC_FILE</span><span class="k">)</span>
</span><span class='line'>  javac <span class="nv">$^</span>
</span><span class='line'>  javadoc -docletpath pdfdoclet-1.0.3/jar/pdfdoclet-1.0.3-all.jar <span class="se">\</span>
</span><span class='line'>            -doclet com.tarsec.javadoc.pdfdoclet.PDFDoclet <span class="nv">$^</span> -verbose <span class="se">\</span>
</span><span class='line'>            -pdf <span class="nv">$@</span>.pdf -overview <span class="k">$(</span>OVERVIEW_FILE<span class="k">)</span> -config config.properties
</span><span class='line'>  evince <span class="k">$(</span>TARGET<span class="k">)</span>.pdf
</span><span class='line'>
</span><span class='line'><span class="nf">clean</span><span class="o">:</span>
</span><span class='line'>  rm -rf <span class="k">$(</span>SRC_PATH<span class="k">)</span>/*.class <span class="k">$(</span>TARGET<span class="k">)</span>.pdf
</span></code></pre></td></tr></table></div></figure>


<p>新增兩個檔案</p>

<ul>
<li>overview.html</li>
</ul>


<figure class='code'><figcaption><span>overview.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>This a overview document for testing. It should supports javadoc overview tags. However, somehow my pdfdoclet did not get javadoc tag to work while javadoc generated file has no problem at all. There might some missing actions.
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>package-info.java</li>
</ul>


<figure class='code'><figcaption><span>package-info.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * This is a page to describe your package</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'>
</span><span class='line'><span class="kn">package</span> <span class="n">test</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>現在產出的pdf檔<a href="/files/javadoc-20150830/test_overview_package_info.pdf">如link，應該沒病毒吧?</a></p>

<p><a name="jdoc-comments-tags"></a></p>

<h3>javadoc 專用註解tag節錄</h3>

<p>偷懶不列support 版本，需要自行找尋相關資料</p>

<table border="1">
<tr>
<th>tag名稱</th>
<th>功能</th>
</tr>
<tr>
<td>@author 作者名稱</td>
<td>請望文生義，預設不會放在產出網頁，需要透過command line才會出現在文件中</td>
</tr>
<tr>
<td>{@code 程式碼}</td>
<td>塞入程式碼</td>
</tr>
<tr>
<td>{@docRoot}</td>
<td>將會被展開替換成文件的最上層目錄，需要link到本機相對路徑檔案時很好用</td>
</tr>
<tr>
<td>@deprecated 作廢說明文字</td>
<td>作廢的API說明</td>
</tr>
<tr>
<td>{@inheritDoc}</td>
<td>當函數宣告的參數、回傳值或是expcetion沒說明時，這邊可以指定從那邊繼承。這些繼承關係也有些預設選項，一言難盡。這邊先跳過，有興趣的請自行找資料。</td>
</tr>
<tr>
<td>@param 參數名稱 說明</td>
<td>請望文生義</td>
</tr>
<tr>
<td>@return 回傳值說明</td>
<td>請望文生義</td>
</tr>
<tr>
<td>@{value}</td>
<td>顯示註解下方變數的常數</td>
</tr>
<tr>
<td nowrap="nowrap">@since 文字，通常是版號</td>
<td>指出該method, package, class等在哪個版號後有效</td>
</tr>
</table>


<p>由於有些tag放到表格不易閱讀，獨立說明如下</p>

<ul>
<li><code>{@link package_名稱.class_名稱#member_函數名稱 顯示在文件的字串}</code>

<ul>
<li>在文件中產生package<em>名稱.class</em>名稱#member_函數名稱的link</li>
</ul>
</li>
<li><code>{@linkplain package_名稱.class_名稱#member_函數名稱 顯示在文件的字串}</code>

<ul>
<li>在文件中產生package<em>名稱.class</em>名稱#member_函數名稱的link。但是顯示的文字不會有link</li>
</ul>
</li>
<li><code>@exception class-名稱 exception_說明</code>

<ul>
<li>應該可以望文生義，另外@throw 也是同樣效果</li>
</ul>
</li>
<li><code>@see</code> 家族，有三種

<ul>
<li><code>@see "字串"</code>

<ul>
<li>請讀者參考字串</li>
</ul>
</li>
<li><code>@see &lt;a href="URL#value"&gt;Link顯示名稱&lt;/a&gt;</code>

<ul>
<li>請讀者參考連結</li>
</ul>
</li>
<li> <code>@see package_名稱.class_名稱#member_函數名稱 顯示名稱</code>

<ul>
<li>建立本地連結到package<em>名稱.class</em>名稱#member_函數名稱</li>
</ul>
</li>
</ul>
</li>
</ul>


<p><a name="jdoc-comments-ex"></a></p>

<h3>套用 javadoc 範例</h3>

<figure class='code'><figcaption><span>最後的檔案和目錄結構</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>$ tree
</span><span class='line'>.
</span><span class='line'>├── com
</span><span class='line'>│   └── test
</span><span class='line'>│       └── test.java
</span><span class='line'>├── config.properties
</span><span class='line'>├── Makefile
</span><span class='line'>├── overview.html
</span><span class='line'>├── package-info.java
</span><span class='line'>└── pdfdoclet-1.0.3
</span><span class='line'>    ├── build.xml
</span><span class='line'>       ....
</span><span class='line'>    └── jar
</span><span class='line'>        └── pdfdoclet-1.0.3-all.jar
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>加了javadoc的程式碼</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">test</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * A example to test javadoc tags</span>
</span><span class='line'><span class="cm"> * &lt;p&gt;</span>
</span><span class='line'><span class="cm"> * @see mul</span>
</span><span class='line'><span class="cm"> * @see test.mul#multiply</span>
</span><span class='line'><span class="cm">*/</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">test</span> <span class="o">{</span>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * multiply class, used by {@link test class test}</span>
</span><span class='line'><span class="cm">    */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">mul</span> <span class="o">{</span>
</span><span class='line'>        <span class="cm">/**</span>
</span><span class='line'><span class="cm">         * @param i operand 1</span>
</span><span class='line'><span class="cm">         * @param j operand 2</span>
</span><span class='line'><span class="cm">         * @return result of i * j</span>
</span><span class='line'><span class="cm">        */</span>
</span><span class='line'>        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">multiply</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="kt">int</span> <span class="n">j</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Number of loop in multiplication: {@value}</span>
</span><span class='line'><span class="cm">    */</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">MAX_NUM</span> <span class="o">=</span> <span class="mi">9</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">test</span> <span class="n">my_test</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">test</span><span class="o">();</span>
</span><span class='line'>        <span class="n">my_test</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">mul</span> <span class="n">my_mul</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">mul</span><span class="o">();</span>
</span><span class='line'>        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">MAX_NUM</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">MAX_NUM</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="s">&quot; x &quot;</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="s">&quot; = &quot;</span> <span class="o">+</span> <span class="n">my_mul</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">));</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>最終產出的pdf檔<a href="/files/javadoc-20150830/test_final.pdf">如link，應該沒病毒吧?</a></p>

<p><a name="jdoc-ref"></a></p>

<h2>參考資料</h2>

<ul>
<li><a href="http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html">javadoc - The Java API Documentation Generator</a></li>
<li><a href="http://www.oracle.com/technetwork/articles/java/index-137868.html">How to Write Doc Comments for the Javadoc Tool</a></li>
<li><a href="http://pdfdoclet.sourceforge.net/running.html">Running pdfdoclet</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/30/using-as-slide-is-online/">GNU as 投影片上線</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-30T11:44:36+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:44 am</span></time>
        
           | <a href="/blog/2015/08/30/using-as-slide-is-online/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/08/30/using-as-slide-is-online/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><iframe src="//www.slideshare.net/slideshow/embed_code/key/vAKND86uAQxxJj" width="720" height="560" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>


<p> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/zzz00072/gnu-as" title="GNU AS簡介" target="_blank">GNU AS簡介</a> </strong> from <strong><a href="//www.slideshare.net/zzz00072" target="_blank">Wen Liao</a></strong> </div></p>

<script async class="speakerdeck-embed" data-id="161641ad32e84a3893c81b2c65437720" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/30/upnp-slide-is-online/">UPnP 投影片上線</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-30T11:32:31+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:32 am</span></time>
        
           | <a href="/blog/2015/08/30/upnp-slide-is-online/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/08/30/upnp-slide-is-online/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><iframe src="//www.slideshare.net/slideshow/embed_code/key/2NbiO9hlIL8aXu" width="720" height="560" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>


<p> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/zzz00072/upnp-10" title="UPnP 1.0 簡介" target="_blank">UPnP 1.0 簡介</a> </strong> from <strong><a href="//www.slideshare.net/zzz00072" target="_blank">Wen Liao</a></strong> </div></p>

<script async class="speakerdeck-embed" data-id="0461edaf0ae947e8b989cfb9ef670ab0" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/27/use-dbdoclet-to-create-manual/">Ubuntu 14.04下使用dbdoclet 產生pdf手冊</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-27T21:48:07+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:48 pm</span></time>
        
           | <a href="/blog/2015/08/27/use-dbdoclet-to-create-manual/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/08/27/use-dbdoclet-to-create-manual/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sept/1/2015 更新：下面的方法有個問題，目錄的頁面會有從<code>ii</code>開始的羅馬數字頁碼。當known issue吧，猜測要從xsl修正，<code>/usr/share/xml/docbook/stylesheet/docbook-xsl/fo/docbook.xsl</code>應該有線索。</p>

<h2>前言</h2>

<p>Javadoc是一個掃描Java原始碼自動產生網頁文件的工具。除此之外，Javadoc還提供了API讓人實作doclet的功能。Javadoc把產出資料餵給doclet，doclet自行決定該怎麼處理，如</p>

<ul>
<li>轉成pdf文件</li>
<li>轉成LaTeX文件</li>
<li>轉成docbook文件</li>
<li>&hellip;</li>
</ul>


<p>回到主題，為了要產生PDF手冊，並且需要符合下面的要求：</p>

<ul>
<li>封面</li>
<li>版權宣告、版本變動紀錄</li>
<li>目錄</li>
<li>SDK簡介，包含方塊圖</li>
<li>API使用方式</li>
<li>範例</li>
</ul>


<h2>doclet 評估</h2>

<p>目前找到幾個免費產生pdf的doclet，簡單的試玩結果如下</p>

<ul>
<li>pdfdoclet

<ul>
<li>直接輸出pdf，沒有目錄、針對手冊需求增加修改資料極度困難</li>
</ul>
</li>
<li>AurigaDoclet

<ul>
<li>和樓上的主要差別在多了目錄</li>
</ul>
</li>
<li>ltxdoclet

<ul>
<li>產出LaTeX檔案，可透過pdflatex輸出pdf。有亂碼，美觀程度不如上面兩個</li>
</ul>
</li>
<li>TeXdoclet

<ul>
<li>產出LaTeX，不支援pdflatex，直接放棄。</li>
</ul>
</li>
<li>dbdoclet

<ul>
<li>產出docbook，透過一些方式可以達到目標，雖然美觀程度還是比不上pdfdoclet和AurigaDoclet，但是比doxygen和ltxdoclet好，最後用這個產生手冊。</li>
</ul>
</li>
<li>其他族繁不及記載

<h2>使用dbdoclet 產生pdf手冊步驟</h2></li>
</ul>


<p>詳細指令大家自行估狗，這邊單純提供key word。大略步驟如下：</p>

<ol>
<li>透過任何方式(openoffice, LaTeX, etc)產生封面、版權宣告的pdf的檔案，假設為<code>cover.pdf</code>。</li>
<li>撰寫針對你要產出手冊的XSL style sheet，我寫了三個東西。這邊要注意的是建議直接在XSL import docbook.xsl。

<ul>
<li>人肉產生page break的指令，原因docbook不夠聰明，有些東西還是得人肉加page break。如一個段落之後就是範例程式的程式碼。這時候範例程式的程式碼放在頁面開頭的話，閱讀應該比較輕鬆。</li>
<li>header的描述</li>
<li>footer的描述，可塞入圖片</li>
</ul>
</li>
<li>以docbook格式撰寫你要塞的內容如

<ul>
<li>簡介</li>
<li>範例程式</li>
</ul>
</li>
<li>透過javadoc執行dbdoclet，我這邊跑完會產生<code>Reference.xml</code>。</li>
<li>使用sed或是你順手的字串工具

<ul>
<li>修改產出的<code>Reference.xml</code>，找對的地方include自己寫的內容</li>
<li>如果有必要，修改針對你要產出手冊的XSL style sheet</li>
</ul>
</li>
<li>透過<code>xsltproc</code>產生fo檔。幾點要注意的

<ul>
<li>要加&ndash;xinclude，不然程式不會去include你自己寫的xml</li>
<li>/usr/share/xml/docbook/stylesheet/docbook-xsl/fo/docbook.xsl不用指定，因為你自己寫的XSL style sheet已經import了，這個問題卡了我一陣子時間。</li>
</ul>
</li>
<li>使用<code>fop</code>將fo轉成pdf檔，假設為<code>draft.pdf</code>。</li>
<li>使用<code>pdftk</code>做

<ul>
<li>把你的<code>draft.pdf</code>目錄前面頁面全部幹掉，另存新檔如<code>temp.pdf</code></li>
<li>把<code>cover.pdf</code>和<code>temp.pdf</code>合併，就會有封面和含目錄以及你設定的手冊了。</li>
</ul>
</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/25/use-doxygen-to-create-manual/">Ubuntu 14.04下使用Doxygen 產生pdf手冊</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-25T23:13:44+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:13 pm</span></time>
        
           | <a href="/blog/2015/08/25/use-doxygen-to-create-manual/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/08/25/use-doxygen-to-create-manual/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>一個pdf程式SDK手冊，你會期待有</p>

<ul>
<li>封面</li>
<li>版權宣告、版本變動紀錄</li>
<li>目錄</li>
<li>SDK簡介，包含方塊圖</li>
<li>API使用方式</li>
<li>範例</li>
</ul>


<p>Doxygen是一個open source的文件產生工具，預設是產生HTML。不過它也可以產生很正規的文件，快速紀錄一下，細節還是要自行補完。要達到上面的目的另外前題是你要會估狗查詢使用LaTeX的用法。</p>

<ol>
<li>安裝doxywizard</li>
<li>安裝doxygen-latex</li>
<li>執行<code>doxywizard</code>，透過GUI設定

<ul>
<li>文件輸出目錄</li>
<li>原始碼目錄</li>
<li>開啟latex輸出</li>
<li>(需要塞範例程式) export -> Input -> EXAMPLE_PATH</li>
</ul>
</li>
<li>細項設定完成後，存檔。</li>
<li>到輸出文件的latex目錄中，開啟refman.tex。剪貼

<ul>
<li><code>%--- Begin generated contents ---</code>之前的文字，另存成header.tex</li>
<li><code>%--- End generated contents ---</code>之後的文字，另存成end.tex</li>
</ul>
</li>
<li>重新執行<code>doxywizard 你剛才存的Doxyfile</code>

<ul>
<li>expert -> LaTeX -> 打開

<ul>
<li>LATEX_HEADER -> 選你剛才存的header.tex</li>
<li>LATEX_FOOTER -> 選你剛才存的end.tex</li>
</ul>
</li>
</ul>
</li>
<li>存檔</li>
<li>修改header.tex，可以加入

<ul>
<li>封面</li>
<li>版權宣告</li>
<li>你產生API文件前的任何東西如簡介，方塊圖，貓的照片等</li>
<li>自訂的header/footer</li>
</ul>
</li>
<li>(需要塞範例程式)

<ul>
<li>在程式碼註解塞入<code>\example 範例程式檔名</code></li>
<li>將<code>範例程式檔名</code>存到前面EXAMPLE_PATH的路徑中</li>
</ul>
</li>
<li><code>doxygen 你剛才存的Doxyfile</code></li>
<li>到輸出文件的latex目錄中

<ul>
<li>make，目錄由程式自動產生</li>
</ul>
</li>
<li>開啟refman.pdf，檢查輸出是不是你要的，不是的話回到第八步</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/08/notes-what-a-c-programmer-should-know-about-memory/">雜記: What a C Programmer Should Know About Memory</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-08T15:30:00+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>3:30 pm</span></time>
        
           | <a href="/blog/2015/08/08/notes-what-a-c-programmer-should-know-about-memory/#disqus_thread"
             data-disqus-identifier="http://wen00072.github.io/blog/2015/08/08/notes-what-a-c-programmer-should-know-about-memory/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>出處: <a href="http://marek.vavrusa.com/c/memory/2015/02/20/memory/">What a C programmer should know about memory</a></p>

<p>這是筆記，不是導讀。單純放我覺得特別的東西和感想。不會自我要求可讀性和文章架構，請自行斟酌。</p>

<h2>Understanding virtual memory - the plot thickens</h2>

<ul>
<li><p>The virtual memory allocator (VMA) may give you a memory it doesn&rsquo;t have, all in a vain hope that you&rsquo;re not going to use it. Just like banks today. 幹原來銀行是虛擬記憶體</p></li>
<li><p>malloc給valid pointer不要太高興，等你要開始用的時候搞不好OS給個OOM說人肉鹹鹹。簡單來說就是一張支票，能不能拿來開等到兌現才知道（煙）</p></li>
</ul>


<h2>Understanding stack allocation</h2>

<p>原來C99的variable length array的運作是因為stack frame的特性，反正你要多少stack在橋的時候順便加一加。malloa一樣的原則。又學到了</p>

<h2>When to bother with a custom allocator</h2>

<ul>
<li>今日英文(?): GP allocator, General purpose allocator，你每天用的malloc是也。什麼，沒用malloc過啊，還真是幸福（煙）。</li>
</ul>


<h3>Slab allocator</h3>

<ul>
<li>有的時候程式會allocte並使用多個不連續的記憶體區塊，如樹狀的資料結構。這時候對於系統來說有幾個問題，一是fragment、二是因為不連續，無法使用cache增快效能。</li>
</ul>


<p>作者posix_memalign()可解決這類的問題。目前看範例，看不懂，感覺上和malloc很大的記憶體空間，自己管理差不多。先跳過，有大大路過可以留言解惑一下。</p>

<h2>Demand paging explained</h2>

<ul>
<li><p>Linux系統提供一系列的記憶體管理API</p>

<ul>
<li>分配，釋放</li>
<li>記憶體管理API

<ul>
<li>mlock，禁止被swapped out</li>
</ul>
</li>
<li>madvise，提供管道告訴系統page管理方式如

<ul>
<li>MADV_RANDOM，期待記憶體page讀取行為是隨機的。</li>
</ul>
</li>
</ul>
</li>
<li><p>laze loading：allocate記憶體先給位址。等到process要存取的時候OS就會發現存取到沒摸過的記憶體，於是就產生page fault，這時候才去處理page分配的問題。</p></li>
<li><p>每次page fault 就像kernel發動白金之星，然後就有一個白痴驚訝地發現自己樓梯怎麼走都走不完，但是他完全無法感受/了解發生了什麼事。</p></li>
</ul>


<h2>Fun with flags memory mapping</h2>

<ul>
<li>long page_size = sysconf(_SC_PAGESIZE);

<ul>
<li>取得系統的page size。</li>
</ul>
</li>
</ul>


<h2>Fixed memory mappings</h2>

<p>投降輸一半，不懂Fixed memory mappings是啥、以及什麼時候需要這樣的東西。</p>

<h2>File-backed memory maps</h2>

<p>透過mmap，可以將檔案內容mmap到記憶體中，如此一來可以加快存取速度。配合參數，多個process可以共用同一塊記憶體。不過衍生出來有幾個問題</p>

<ol>
<li>如何寫回檔案

<ul>
<li>man msync</li>
<li>其他方式：fsync/pwrite</li>
</ul>
</li>
<li>如何調整檔案/記憶體長度

<ul>
<li>man ftruncate</li>
</ul>
</li>
</ol>


<h3>Copy-on-write</h3>

<p>有些情況是一個process要吃別的process已經map到記憶體的內容，而不要把自己改過的資料放回原本的記憶體。也就是說最終會有兩塊記憶體(兩份資料)。當然每次都複製有點多餘，因此系統使用了Copy-on-write機制。要怎麼做呢？就是在mmap使用MAP_PRIVATE參數即可。</p>

<h3>mmap不是萬能丹，極端情況下連續page fault可能會比原本的開檔獨資料還慢。</h3>

<hr />

<h1>延伸參考資料，我都沒看</h1>

<ul>
<li><a href="http://www.akkadia.org/drepper/cpumemory.pdf">What every programmer should know about memory</a></li>
<li><a href="http://landley.net/writing/memory-faq.txt">Memeory FAQ</a></li>
<li><a href="https://www.kernel.org/doc/gorman/pdf/thesis.pdf">An Investigation Into the Theoretical Foundations and Implementation of the Linux Virtual Memory Manager</a></li>
<li><a href="https://www.kernel.org/doc/gorman/pdf/understand.pdf">Understanding the Linux Virtual Memory Manager</a>

<ul>
<li>爆炸長，講Linux的VM管理</li>
</ul>
</li>
<li><a href="http://www.ualberta.ca/CNS/RESEARCH/LinuxClusters/mem.html">Understanding Memory</a></li>
<li><a href="http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory/">Anatomy of a Program in Memory</a></li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/5">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/3">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2019/06/08/glibc-build-observing/">觀察編譯glibc的產出</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/06/08/glibc-surface-observing/">在Ubuntu 18.04.2 Trace 程式呼叫 Glibc 函數</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/03/20/dump-process-memory-block-via-gdb/">從gdb Dump Process 記憶體資料</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/12/12/linux-binary-resources/">Linux Binary 縮寫和連結</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/12/06/update-octopress-environment-for-ubuntu-18-dot-04/">Ubuntu 16.04更新到Ubuntu 18.04後Octopress 環境變動</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Top Categories</h1>
    <ul id="top-category-list"><li><a href='/blog/categories/linux'>linux (43)</a></li><li><a href='/blog/categories/c'>c (34)</a></li><li><a href='/blog/categories/debian'>debian (16)</a></li><li><a href='/blog/categories/presentation'>presentation (14)</a></li><li><a href='/blog/categories/binutils'>binutils (14)</a></li><li><a href='/blog/categories/arm'>arm (12)</a></li><li><a href='/blog/categories/octopress'>octopress (9)</a></li><li><a href='/blog/categories/gan-xiang'>感想 (8)</a></li><li><a href='/blog/categories/make'>make (6)</a></li><li><a href='/blog/categories/stm32'>stm32 (5)</a></li></ul>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/arm'>arm (12)</a></li><li><a href='/blog/categories/asm'>asm (1)</a></li><li><a href='/blog/categories/assembler'>assembler (2)</a></li><li><a href='/blog/categories/assembly'>assembly (3)</a></li><li><a href='/blog/categories/autotools'>autotools (4)</a></li><li><a href='/blog/categories/banana-pi'>banana pi (1)</a></li><li><a href='/blog/categories/bash'>bash (1)</a></li><li><a href='/blog/categories/binutil'>binutil (1)</a></li><li><a href='/blog/categories/binutils'>binutils (14)</a></li><li><a href='/blog/categories/buildroot'>buildroot (2)</a></li><li><a href='/blog/categories/c'>c (34)</a></li><li><a href='/blog/categories/c-preprocessor'>c preprocessor (1)</a></li><li><a href='/blog/categories/c99'>c99 (2)</a></li><li><a href='/blog/categories/cmake'>cmake (2)</a></li><li><a href='/blog/categories/cscope'>cscope (1)</a></li><li><a href='/blog/categories/ctags'>ctags (1)</a></li><li><a href='/blog/categories/dbdoclet'>dbdoclet (1)</a></li><li><a href='/blog/categories/debian'>debian (16)</a></li><li><a href='/blog/categories/debootstrap'>debootstrap (1)</a></li><li><a href='/blog/categories/debug'>debug (1)</a></li><li><a href='/blog/categories/doxygen'>doxygen (1)</a></li><li><a href='/blog/categories/elf'>elf (1)</a></li><li><a href='/blog/categories/f9'>f9 (1)</a></li><li><a href='/blog/categories/free-software'>free software (1)</a></li><li><a href='/blog/categories/freertos'>freertos (1)</a></li><li><a href='/blog/categories/fsf'>fsf (1)</a></li><li><a href='/blog/categories/gcc'>gcc (2)</a></li><li><a href='/blog/categories/gdb'>gdb (4)</a></li><li><a href='/blog/categories/getopt'>getopt (1)</a></li><li><a href='/blog/categories/gettext'>gettext (2)</a></li><li><a href='/blog/categories/git'>git (4)</a></li><li><a href='/blog/categories/git-remote'>git remote (2)</a></li><li><a href='/blog/categories/github-flavored-markdown'>github flavored markdown (1)</a></li><li><a href='/blog/categories/github-pages'>github pages (1)</a></li><li><a href='/blog/categories/glibc'>glibc (2)</a></li><li><a href='/blog/categories/gnu'>gnu (2)</a></li><li><a href='/blog/categories/gnu-as'>gnu as (1)</a></li><li><a href='/blog/categories/gpl'>gpl (1)</a></li><li><a href='/blog/categories/gstreamer'>gstreamer (1)</a></li><li><a href='/blog/categories/hole'>hole (1)</a></li><li><a href='/blog/categories/inline'>inline (1)</a></li><li><a href='/blog/categories/javadoc'>javadoc (2)</a></li><li><a href='/blog/categories/kernel'>kernel (1)</a></li><li><a href='/blog/categories/ld'>ld (1)</a></li><li><a href='/blog/categories/libtool'>libtool (2)</a></li><li><a href='/blog/categories/linker'>linker (1)</a></li><li><a href='/blog/categories/linker-script'>linker script (5)</a></li><li><a href='/blog/categories/linux'>linux (43)</a></li><li><a href='/blog/categories/linux-kernel'>linux kernel (3)</a></li><li><a href='/blog/categories/linux-utilities'>linux utilities (2)</a></li><li><a href='/blog/categories/live-cd'>live cd (1)</a></li><li><a href='/blog/categories/lseek'>lseek (1)</a></li><li><a href='/blog/categories/macro'>macro (1)</a></li><li><a href='/blog/categories/make'>make (6)</a></li><li><a href='/blog/categories/markdown'>markdown (2)</a></li><li><a href='/blog/categories/octopress'>octopress (9)</a></li><li><a href='/blog/categories/osm'>osm (1)</a></li><li><a href='/blog/categories/patch'>patch (1)</a></li><li><a href='/blog/categories/pbuilder'>pbuilder (2)</a></li><li><a href='/blog/categories/pomodoro-technique'>pomodoro technique (1)</a></li><li><a href='/blog/categories/presentation'>presentation (14)</a></li><li><a href='/blog/categories/python'>python (4)</a></li><li><a href='/blog/categories/qemu'>qemu (5)</a></li><li><a href='/blog/categories/quilt'>quilt (1)</a></li><li><a href='/blog/categories/regex'>regex (2)</a></li><li><a href='/blog/categories/rtenv'>rtenv (1)</a></li><li><a href='/blog/categories/rtos'>rtos (1)</a></li><li><a href='/blog/categories/semihosting'>semihosting (1)</a></li><li><a href='/blog/categories/shell-script'>shell script (4)</a></li><li><a href='/blog/categories/software-development'>software development (1)</a></li><li><a href='/blog/categories/stm32'>stm32 (5)</a></li><li><a href='/blog/categories/strip'>strip (1)</a></li><li><a href='/blog/categories/trace'>trace (1)</a></li><li><a href='/blog/categories/ubuntu'>ubuntu (1)</a></li><li><a href='/blog/categories/upnp'>upnp (1)</a></li><li><a href='/blog/categories/usb'>usb (1)</a></li><li><a href='/blog/categories/valgrind'>valgrind (2)</a></li><li><a href='/blog/categories/vim'>vim (5)</a></li><li><a href='/blog/categories/vim-plugin'>vim plugin (1)</a></li><li><a href='/blog/categories/virtualbox'>virtualbox (2)</a></li><li><a href='/blog/categories/vundle'>vundle (1)</a></li><li><a href='/blog/categories/wireless'>wireless (1)</a></li><li><a href='/blog/categories/wpa-supplicant'>wpa_supplicant (1)</a></li><li><a href='/blog/categories/tai-wan-xiao-chi'>台灣小吃 (1)</a></li><li><a href='/blog/categories/gan-xiang'>感想 (8)</a></li><li><a href='/blog/categories/kuang-rou'>爌肉 (1)</a></li><li><a href='/blog/categories/bi-ji'>筆記 (2)</a></li><li><a href='/blog/categories/zu-zhuang'>組裝 (3)</a></li><li><a href='/blog/categories/lao-jian-zhu'>老建築 (3)</a></li><li><a href='/blog/categories/guo-qi'>過期 (3)</a></li></ul>
</section>
<section>
  <h1>Category Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/arm' style='font-size: 116.74418604651163%'>arm(12)</a> <a href='/blog/categories/asm' style='font-size: 101.3953488372093%'>asm(1)</a> <a href='/blog/categories/assembler' style='font-size: 102.79069767441861%'>assembler(2)</a> <a href='/blog/categories/assembly' style='font-size: 104.18604651162791%'>assembly(3)</a> <a href='/blog/categories/autotools' style='font-size: 105.5813953488372%'>autotools(4)</a> <a href='/blog/categories/banana-pi' style='font-size: 101.3953488372093%'>banana pi(1)</a> <a href='/blog/categories/bash' style='font-size: 101.3953488372093%'>bash(1)</a> <a href='/blog/categories/binutil' style='font-size: 101.3953488372093%'>binutil(1)</a> <a href='/blog/categories/binutils' style='font-size: 119.53488372093022%'>binutils(14)</a> <a href='/blog/categories/buildroot' style='font-size: 102.79069767441861%'>buildroot(2)</a> <a href='/blog/categories/c' style='font-size: 147.4418604651163%'>c(34)</a> <a href='/blog/categories/c-preprocessor' style='font-size: 101.3953488372093%'>c preprocessor(1)</a> <a href='/blog/categories/c99' style='font-size: 102.79069767441861%'>c99(2)</a> <a href='/blog/categories/cmake' style='font-size: 102.79069767441861%'>cmake(2)</a> <a href='/blog/categories/cscope' style='font-size: 101.3953488372093%'>cscope(1)</a> <a href='/blog/categories/ctags' style='font-size: 101.3953488372093%'>ctags(1)</a> <a href='/blog/categories/dbdoclet' style='font-size: 101.3953488372093%'>dbdoclet(1)</a> <a href='/blog/categories/debian' style='font-size: 122.32558139534883%'>debian(16)</a> <a href='/blog/categories/debootstrap' style='font-size: 101.3953488372093%'>debootstrap(1)</a> <a href='/blog/categories/debug' style='font-size: 101.3953488372093%'>debug(1)</a> <a href='/blog/categories/doxygen' style='font-size: 101.3953488372093%'>doxygen(1)</a> <a href='/blog/categories/elf' style='font-size: 101.3953488372093%'>elf(1)</a> <a href='/blog/categories/f9' style='font-size: 101.3953488372093%'>f9(1)</a> <a href='/blog/categories/free-software' style='font-size: 101.3953488372093%'>free software(1)</a> <a href='/blog/categories/freertos' style='font-size: 101.3953488372093%'>freertos(1)</a> <a href='/blog/categories/fsf' style='font-size: 101.3953488372093%'>fsf(1)</a> <a href='/blog/categories/gcc' style='font-size: 102.79069767441861%'>gcc(2)</a> <a href='/blog/categories/gdb' style='font-size: 105.5813953488372%'>gdb(4)</a> <a href='/blog/categories/getopt' style='font-size: 101.3953488372093%'>getopt(1)</a> <a href='/blog/categories/gettext' style='font-size: 102.79069767441861%'>gettext(2)</a> <a href='/blog/categories/git' style='font-size: 105.5813953488372%'>git(4)</a> <a href='/blog/categories/git-remote' style='font-size: 102.79069767441861%'>git remote(2)</a> <a href='/blog/categories/github-flavored-markdown' style='font-size: 101.3953488372093%'>github flavored markdown(1)</a> <a href='/blog/categories/github-pages' style='font-size: 101.3953488372093%'>github pages(1)</a> <a href='/blog/categories/glibc' style='font-size: 102.79069767441861%'>glibc(2)</a> <a href='/blog/categories/gnu' style='font-size: 102.79069767441861%'>gnu(2)</a> <a href='/blog/categories/gnu-as' style='font-size: 101.3953488372093%'>gnu as(1)</a> <a href='/blog/categories/gpl' style='font-size: 101.3953488372093%'>gpl(1)</a> <a href='/blog/categories/gstreamer' style='font-size: 101.3953488372093%'>gstreamer(1)</a> <a href='/blog/categories/hole' style='font-size: 101.3953488372093%'>hole(1)</a> <a href='/blog/categories/inline' style='font-size: 101.3953488372093%'>inline(1)</a> <a href='/blog/categories/javadoc' style='font-size: 102.79069767441861%'>javadoc(2)</a> <a href='/blog/categories/kernel' style='font-size: 101.3953488372093%'>kernel(1)</a> <a href='/blog/categories/ld' style='font-size: 101.3953488372093%'>ld(1)</a> <a href='/blog/categories/libtool' style='font-size: 102.79069767441861%'>libtool(2)</a> <a href='/blog/categories/linker' style='font-size: 101.3953488372093%'>linker(1)</a> <a href='/blog/categories/linker-script' style='font-size: 106.97674418604652%'>linker script(5)</a> <a href='/blog/categories/linux' style='font-size: 160.0%'>linux(43)</a> <a href='/blog/categories/linux-kernel' style='font-size: 104.18604651162791%'>linux kernel(3)</a> <a href='/blog/categories/linux-utilities' style='font-size: 102.79069767441861%'>linux utilities(2)</a> <a href='/blog/categories/live-cd' style='font-size: 101.3953488372093%'>live cd(1)</a> <a href='/blog/categories/lseek' style='font-size: 101.3953488372093%'>lseek(1)</a> <a href='/blog/categories/macro' style='font-size: 101.3953488372093%'>macro(1)</a> <a href='/blog/categories/make' style='font-size: 108.37209302325581%'>make(6)</a> <a href='/blog/categories/markdown' style='font-size: 102.79069767441861%'>markdown(2)</a> <a href='/blog/categories/octopress' style='font-size: 112.55813953488372%'>octopress(9)</a> <a href='/blog/categories/osm' style='font-size: 101.3953488372093%'>osm(1)</a> <a href='/blog/categories/patch' style='font-size: 101.3953488372093%'>patch(1)</a> <a href='/blog/categories/pbuilder' style='font-size: 102.79069767441861%'>pbuilder(2)</a> <a href='/blog/categories/pomodoro-technique' style='font-size: 101.3953488372093%'>pomodoro technique(1)</a> <a href='/blog/categories/presentation' style='font-size: 119.53488372093022%'>presentation(14)</a> <a href='/blog/categories/python' style='font-size: 105.5813953488372%'>python(4)</a> <a href='/blog/categories/qemu' style='font-size: 106.97674418604652%'>qemu(5)</a> <a href='/blog/categories/quilt' style='font-size: 101.3953488372093%'>quilt(1)</a> <a href='/blog/categories/regex' style='font-size: 102.79069767441861%'>regex(2)</a> <a href='/blog/categories/rtenv' style='font-size: 101.3953488372093%'>rtenv(1)</a> <a href='/blog/categories/rtos' style='font-size: 101.3953488372093%'>rtos(1)</a> <a href='/blog/categories/semihosting' style='font-size: 101.3953488372093%'>semihosting(1)</a> <a href='/blog/categories/shell-script' style='font-size: 105.5813953488372%'>shell script(4)</a> <a href='/blog/categories/software-development' style='font-size: 101.3953488372093%'>software development(1)</a> <a href='/blog/categories/stm32' style='font-size: 106.97674418604652%'>stm32(5)</a> <a href='/blog/categories/strip' style='font-size: 101.3953488372093%'>strip(1)</a> <a href='/blog/categories/trace' style='font-size: 101.3953488372093%'>trace(1)</a> <a href='/blog/categories/ubuntu' style='font-size: 101.3953488372093%'>ubuntu(1)</a> <a href='/blog/categories/upnp' style='font-size: 101.3953488372093%'>upnp(1)</a> <a href='/blog/categories/usb' style='font-size: 101.3953488372093%'>usb(1)</a> <a href='/blog/categories/valgrind' style='font-size: 102.79069767441861%'>valgrind(2)</a> <a href='/blog/categories/vim' style='font-size: 106.97674418604652%'>vim(5)</a> <a href='/blog/categories/vim-plugin' style='font-size: 101.3953488372093%'>vim plugin(1)</a> <a href='/blog/categories/virtualbox' style='font-size: 102.79069767441861%'>virtualbox(2)</a> <a href='/blog/categories/vundle' style='font-size: 101.3953488372093%'>vundle(1)</a> <a href='/blog/categories/wireless' style='font-size: 101.3953488372093%'>wireless(1)</a> <a href='/blog/categories/wpa-supplicant' style='font-size: 101.3953488372093%'>wpa_supplicant(1)</a> <a href='/blog/categories/tai-wan-xiao-chi' style='font-size: 101.3953488372093%'>台灣小吃(1)</a> <a href='/blog/categories/gan-xiang' style='font-size: 111.16279069767442%'>感想(8)</a> <a href='/blog/categories/kuang-rou' style='font-size: 101.3953488372093%'>爌肉(1)</a> <a href='/blog/categories/bi-ji' style='font-size: 102.79069767441861%'>筆記(2)</a> <a href='/blog/categories/zu-zhuang' style='font-size: 104.18604651162791%'>組裝(3)</a> <a href='/blog/categories/lao-jian-zhu' style='font-size: 104.18604651162791%'>老建築(3)</a> <a href='/blog/categories/guo-qi' style='font-size: 104.18604651162791%'>過期(3)</a> </span>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.<br>
  Copyright &copy; 2019 - Wen Liao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'httpwen00072githubio';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
